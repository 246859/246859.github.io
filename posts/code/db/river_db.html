<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.61" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://246859.github.io/my-blog-giscus/posts/code/db/river_db.html"><meta property="og:site_name" content="å¯’æ±Ÿè“‘ç¬ ç¿"><meta property="og:title" content="RiverDB"><meta property="og:description" content="RiverDB"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-07-22T06:21:00.000Z"><meta property="article:author" content="å¯’æ±Ÿè“‘ç¬ ç¿"><meta property="article:tag" content="NoSQL"><meta property="article:tag" content="Bitcask"><meta property="article:tag" content="é€ è½®å­"><meta property="article:published_time" content="2023-12-02T00:00:00.000Z"><meta property="article:modified_time" content="2024-07-22T06:21:00.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"RiverDB","image":[""],"datePublished":"2023-12-02T00:00:00.000Z","dateModified":"2024-07-22T06:21:00.000Z","author":[{"@type":"Person","name":"å¯’æ±Ÿè“‘ç¬ ç¿","url":"https://mrhope.site"}]}</script><link rel="icon" href="/favicon.ico"><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?87276829dc72e9eeef7c53e10550b458";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><title>RiverDB | å¯’æ±Ÿè“‘ç¬ ç¿</title><meta name="description" content="RiverDB">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-77fdca77.css" as="style"><link rel="stylesheet" href="/assets/style-77fdca77.css">
    <link rel="modulepreload" href="/assets/app-85b15bba.js"><link rel="modulepreload" href="/assets/framework-a4c02b8f.js"><link rel="modulepreload" href="/assets/river_db.html-c5c44e8e.js"><link rel="modulepreload" href="/assets/river_db.html-f32b1cca.js"><link rel="prefetch" href="/assets/index.html-13c5752e.js" as="script"><link rel="prefetch" href="/assets/intro.html-3878003b.js" as="script"><link rel="prefetch" href="/assets/tool.html-86f92be8.js" as="script"><link rel="prefetch" href="/assets/dst.html-f10e028a.js" as="script"><link rel="prefetch" href="/assets/dstm.html-59c20707.js" as="script"><link rel="prefetch" href="/assets/k8s_install.html-43b82b48.js" as="script"><link rel="prefetch" href="/assets/pic.html-aee46abc.js" as="script"><link rel="prefetch" href="/assets/ssl_cert_collect.html-9d28bdc6.js" as="script"><link rel="prefetch" href="/assets/statistic.html-fe4f0f51.js" as="script"><link rel="prefetch" href="/assets/vuepresshope.html-8fee38d7.js" as="script"><link rel="prefetch" href="/assets/2023_01_22.html-82dea1b0.js" as="script"><link rel="prefetch" href="/assets/2023_02_27.html-59975960.js" as="script"><link rel="prefetch" href="/assets/2023_10_09.html-339c033b.js" as="script"><link rel="prefetch" href="/assets/2024_02_27.html-bf817e86.js" as="script"><link rel="prefetch" href="/assets/2024_06_03.html-722d137a.js" as="script"><link rel="prefetch" href="/assets/bloodborn.html-86ae4e7d.js" as="script"><link rel="prefetch" href="/assets/darksoul1.html-0ae6c59c.js" as="script"><link rel="prefetch" href="/assets/darksoul2.html-dde03d6c.js" as="script"><link rel="prefetch" href="/assets/darksoul3.html-2da7070a.js" as="script"><link rel="prefetch" href="/assets/divinity.html-9c05ffb0.js" as="script"><link rel="prefetch" href="/assets/eastward.html-60a37aa8.js" as="script"><link rel="prefetch" href="/assets/elden_ring.html-6f5fd759.js" as="script"><link rel="prefetch" href="/assets/firework.html-c47e5e66.js" as="script"><link rel="prefetch" href="/assets/gp.html-0aac48f3.js" as="script"><link rel="prefetch" href="/assets/gujianqitan.html-87ace895.js" as="script"><link rel="prefetch" href="/assets/kingdom_come.html-8493fd23.js" as="script"><link rel="prefetch" href="/assets/mc.html-76652718.js" as="script"><link rel="prefetch" href="/assets/pzb.html-252a11d5.js" as="script"><link rel="prefetch" href="/assets/re2.html-0f67b640.js" as="script"><link rel="prefetch" href="/assets/sekrio.html-628b3f8b.js" as="script"><link rel="prefetch" href="/assets/witcher.html-c87f54e3.js" as="script"><link rel="prefetch" href="/assets/dockermem.html-e826025b.js" as="script"><link rel="prefetch" href="/assets/go_bug_of_hertz_limiter.html-402c8a2a.js" as="script"><link rel="prefetch" href="/assets/goland_invalid_ref.html-3defca6b.js" as="script"><link rel="prefetch" href="/assets/gotime.html-8af8b8bb.js" as="script"><link rel="prefetch" href="/assets/hack.html-d044a0ef.js" as="script"><link rel="prefetch" href="/assets/linuxexe.html-5fd5af96.js" as="script"><link rel="prefetch" href="/assets/mysqlinject.html-5aab2140.js" as="script"><link rel="prefetch" href="/assets/mysqlpassword.html-e23aa2d8.js" as="script"><link rel="prefetch" href="/assets/oom_pprof.html-4f1d2753.js" as="script"><link rel="prefetch" href="/assets/redisdataloss.html-4ddfaf2a.js" as="script"><link rel="prefetch" href="/assets/binary_heap.html-86cc9d40.js" as="script"><link rel="prefetch" href="/assets/binary_tree.html-4029e1cb.js" as="script"><link rel="prefetch" href="/assets/dequeue.html-dd8687d5.js" as="script"><link rel="prefetch" href="/assets/sort.html-77d803e4.js" as="script"><link rel="prefetch" href="/assets/fluttertry.html-2a5e9d70.js" as="script"><link rel="prefetch" href="/assets/toml.html-809a7a25.js" as="script"><link rel="prefetch" href="/assets/unicode.html-1cd3ca6e.js" as="script"><link rel="prefetch" href="/assets/bitcask.html-b6a75d79.js" as="script"><link rel="prefetch" href="/assets/docker_install_mariadb.html-0b84acac.js" as="script"><link rel="prefetch" href="/assets/docker_install_mongo.html-a2e0ac87.js" as="script"><link rel="prefetch" href="/assets/docker_install_mysql.html-eea418ce.js" as="script"><link rel="prefetch" href="/assets/docker_install_postgres.html-2328c07f.js" as="script"><link rel="prefetch" href="/assets/docker_install_redis.html-7da57002.js" as="script"><link rel="prefetch" href="/assets/index_length_exceed.html-ee4d36ee.js" as="script"><link rel="prefetch" href="/assets/wal_in_leveldb.html-9de2921d.js" as="script"><link rel="prefetch" href="/assets/0.dcoker.html-81d5833f.js" as="script"><link rel="prefetch" href="/assets/1.start.html-9bb4c77b.js" as="script"><link rel="prefetch" href="/assets/docker_mysql.html-26b7b3a1.js" as="script"><link rel="prefetch" href="/assets/docker_nginx.html-2a818349.js" as="script"><link rel="prefetch" href="/assets/expand.html-1e193ba4.js" as="script"><link rel="prefetch" href="/assets/0.introduction.html-9c3dd345.js" as="script"><link rel="prefetch" href="/assets/1.repo.html-b853952f.js" as="script"><link rel="prefetch" href="/assets/2.branch.html-e224434c.js" as="script"><link rel="prefetch" href="/assets/3.remote.html-9e03f1b6.js" as="script"><link rel="prefetch" href="/assets/4.gitserver.html-0d3d0d0e.js" as="script"><link rel="prefetch" href="/assets/autotoolbox.html-1f3696e9.js" as="script"><link rel="prefetch" href="/assets/bitflag.html-4bc22372.js" as="script"><link rel="prefetch" href="/assets/geo2ip.html-41c1872f.js" as="script"><link rel="prefetch" href="/assets/go_ip2loc.html-c029358a.js" as="script"><link rel="prefetch" href="/assets/go_tail_read_file.html-d79589cd.js" as="script"><link rel="prefetch" href="/assets/makefile.html-0963e200.js" as="script"><link rel="prefetch" href="/assets/pipeline.html-267ca703.js" as="script"><link rel="prefetch" href="/assets/registry.html-6db4ccf7.js" as="script"><link rel="prefetch" href="/assets/remotedev.html-4e82f457.js" as="script"><link rel="prefetch" href="/assets/clash_on_linux.html-84593c2e.js" as="script"><link rel="prefetch" href="/assets/debian12_install.html-6d805c31.js" as="script"><link rel="prefetch" href="/assets/linuxservice.html-2806762c.js" as="script"><link rel="prefetch" href="/assets/nat_loss.html-03953f92.js" as="script"><link rel="prefetch" href="/assets/00.start.html-f140dbdd.js" as="script"><link rel="prefetch" href="/assets/01.principle.html-20571033.js" as="script"><link rel="prefetch" href="/assets/02.create.html-7076a59c.js" as="script"><link rel="prefetch" href="/assets/03.structure.html-aab519ba.js" as="script"><link rel="prefetch" href="/assets/04.behavior.html-bf4612b0.js" as="script"><link rel="prefetch" href="/assets/pypi_upload.html-aa95e485.js" as="script"><link rel="prefetch" href="/assets/install.html-69de95b3.js" as="script"><link rel="prefetch" href="/assets/win10_reset.html-47b6c941.js" as="script"><link rel="prefetch" href="/assets/404.html-134169a8.js" as="script"><link rel="prefetch" href="/assets/index.html-a8dd470d.js" as="script"><link rel="prefetch" href="/assets/index.html-c2b12446.js" as="script"><link rel="prefetch" href="/assets/index.html-c6730ef8.js" as="script"><link rel="prefetch" href="/assets/index.html-f77de5e0.js" as="script"><link rel="prefetch" href="/assets/index.html-e0c9469b.js" as="script"><link rel="prefetch" href="/assets/index.html-a1339255.js" as="script"><link rel="prefetch" href="/assets/index.html-1f16e803.js" as="script"><link rel="prefetch" href="/assets/index.html-116ac8fd.js" as="script"><link rel="prefetch" href="/assets/index.html-71e4afbc.js" as="script"><link rel="prefetch" href="/assets/index.html-4bb2537e.js" as="script"><link rel="prefetch" href="/assets/index.html-569e887b.js" as="script"><link rel="prefetch" href="/assets/index.html-b6599f23.js" as="script"><link rel="prefetch" href="/assets/index.html-7308ac22.js" as="script"><link rel="prefetch" href="/assets/index.html-2518600c.js" as="script"><link rel="prefetch" href="/assets/index.html-fa9225c9.js" as="script"><link rel="prefetch" href="/assets/index.html-239f16a7.js" as="script"><link rel="prefetch" href="/assets/index.html-bf81824d.js" as="script"><link rel="prefetch" href="/assets/index.html-2c5cb19e.js" as="script"><link rel="prefetch" href="/assets/index.html-12bc9268.js" as="script"><link rel="prefetch" href="/assets/index.html-63da4abe.js" as="script"><link rel="prefetch" href="/assets/index.html-9d4ad2b2.js" as="script"><link rel="prefetch" href="/assets/index.html-36c8553b.js" as="script"><link rel="prefetch" href="/assets/index.html-1e7ed82a.js" as="script"><link rel="prefetch" href="/assets/index.html-978c143b.js" as="script"><link rel="prefetch" href="/assets/index.html-1f3edce6.js" as="script"><link rel="prefetch" href="/assets/index.html-6f218e43.js" as="script"><link rel="prefetch" href="/assets/index.html-8cebc7a1.js" as="script"><link rel="prefetch" href="/assets/index.html-8f673d9b.js" as="script"><link rel="prefetch" href="/assets/index.html-47cb475d.js" as="script"><link rel="prefetch" href="/assets/index.html-56f9cc75.js" as="script"><link rel="prefetch" href="/assets/index.html-f0be0786.js" as="script"><link rel="prefetch" href="/assets/index.html-30da1c1c.js" as="script"><link rel="prefetch" href="/assets/index.html-7f8d1887.js" as="script"><link rel="prefetch" href="/assets/index.html-508bfa0f.js" as="script"><link rel="prefetch" href="/assets/index.html-03a889bb.js" as="script"><link rel="prefetch" href="/assets/index.html-91dd10ed.js" as="script"><link rel="prefetch" href="/assets/index.html-3ad7899d.js" as="script"><link rel="prefetch" href="/assets/index.html-3c58503e.js" as="script"><link rel="prefetch" href="/assets/index.html-1e9c0183.js" as="script"><link rel="prefetch" href="/assets/index.html-c7bbe1e4.js" as="script"><link rel="prefetch" href="/assets/index.html-e8712825.js" as="script"><link rel="prefetch" href="/assets/index.html-f6516f7b.js" as="script"><link rel="prefetch" href="/assets/index.html-5944e5b8.js" as="script"><link rel="prefetch" href="/assets/index.html-eb145ec0.js" as="script"><link rel="prefetch" href="/assets/index.html-4d6cc855.js" as="script"><link rel="prefetch" href="/assets/index.html-0c29e072.js" as="script"><link rel="prefetch" href="/assets/index.html-ddf3ac7d.js" as="script"><link rel="prefetch" href="/assets/index.html-28ff48f1.js" as="script"><link rel="prefetch" href="/assets/index.html-5484e5af.js" as="script"><link rel="prefetch" href="/assets/index.html-4b8975c8.js" as="script"><link rel="prefetch" href="/assets/index.html-a3949c34.js" as="script"><link rel="prefetch" href="/assets/index.html-818f0dba.js" as="script"><link rel="prefetch" href="/assets/index.html-baa95252.js" as="script"><link rel="prefetch" href="/assets/index.html-bc948a61.js" as="script"><link rel="prefetch" href="/assets/index.html-c0d20a45.js" as="script"><link rel="prefetch" href="/assets/index.html-acbf61e2.js" as="script"><link rel="prefetch" href="/assets/index.html-f87af1bd.js" as="script"><link rel="prefetch" href="/assets/index.html-d67b43df.js" as="script"><link rel="prefetch" href="/assets/index.html-49c79ee4.js" as="script"><link rel="prefetch" href="/assets/index.html-d751a088.js" as="script"><link rel="prefetch" href="/assets/index.html-c4112fcd.js" as="script"><link rel="prefetch" href="/assets/index.html-f20df06e.js" as="script"><link rel="prefetch" href="/assets/index.html-c91f76d6.js" as="script"><link rel="prefetch" href="/assets/index.html-ec399d6b.js" as="script"><link rel="prefetch" href="/assets/index.html-e5389718.js" as="script"><link rel="prefetch" href="/assets/index.html-23fe4f0a.js" as="script"><link rel="prefetch" href="/assets/index.html-fb64ba61.js" as="script"><link rel="prefetch" href="/assets/index.html-cf09b404.js" as="script"><link rel="prefetch" href="/assets/index.html-8614089d.js" as="script"><link rel="prefetch" href="/assets/index.html-d50a25dc.js" as="script"><link rel="prefetch" href="/assets/index.html-dfb7e56b.js" as="script"><link rel="prefetch" href="/assets/index.html-809f0d10.js" as="script"><link rel="prefetch" href="/assets/index.html-2dee8dbd.js" as="script"><link rel="prefetch" href="/assets/index.html-bf557cd3.js" as="script"><link rel="prefetch" href="/assets/index.html-aa5a8b16.js" as="script"><link rel="prefetch" href="/assets/index.html-e7358412.js" as="script"><link rel="prefetch" href="/assets/index.html-423a7810.js" as="script"><link rel="prefetch" href="/assets/index.html-db029ae8.js" as="script"><link rel="prefetch" href="/assets/index.html-3a03a721.js" as="script"><link rel="prefetch" href="/assets/index.html-f82a7f8b.js" as="script"><link rel="prefetch" href="/assets/index.html-78968ae5.js" as="script"><link rel="prefetch" href="/assets/index.html-1029f001.js" as="script"><link rel="prefetch" href="/assets/index.html-a017e6c3.js" as="script"><link rel="prefetch" href="/assets/index.html-5196ebfe.js" as="script"><link rel="prefetch" href="/assets/index.html-cbf56dc1.js" as="script"><link rel="prefetch" href="/assets/index.html-d5c628a4.js" as="script"><link rel="prefetch" href="/assets/index.html-3119d9b8.js" as="script"><link rel="prefetch" href="/assets/index.html-06e743f7.js" as="script"><link rel="prefetch" href="/assets/index.html-8a5d1b82.js" as="script"><link rel="prefetch" href="/assets/index.html-29962abb.js" as="script"><link rel="prefetch" href="/assets/index.html-c0f6e4dc.js" as="script"><link rel="prefetch" href="/assets/index.html-e41e4c06.js" as="script"><link rel="prefetch" href="/assets/index.html-f6ea718a.js" as="script"><link rel="prefetch" href="/assets/index.html-bfe0cad7.js" as="script"><link rel="prefetch" href="/assets/index.html-6a7bb10f.js" as="script"><link rel="prefetch" href="/assets/index.html-e5d4579c.js" as="script"><link rel="prefetch" href="/assets/index.html-eac833ae.js" as="script"><link rel="prefetch" href="/assets/index.html-ebd0cc67.js" as="script"><link rel="prefetch" href="/assets/index.html-7a945891.js" as="script"><link rel="prefetch" href="/assets/index.html-774886e5.js" as="script"><link rel="prefetch" href="/assets/index.html-2174b04b.js" as="script"><link rel="prefetch" href="/assets/index.html-ad0b79a4.js" as="script"><link rel="prefetch" href="/assets/index.html-9b30188e.js" as="script"><link rel="prefetch" href="/assets/index.html-8d2144d5.js" as="script"><link rel="prefetch" href="/assets/index.html-40f7df0a.js" as="script"><link rel="prefetch" href="/assets/index.html-c6a8fd47.js" as="script"><link rel="prefetch" href="/assets/index.html-6053ccb2.js" as="script"><link rel="prefetch" href="/assets/index.html-8192e29b.js" as="script"><link rel="prefetch" href="/assets/index.html-e4604048.js" as="script"><link rel="prefetch" href="/assets/index.html-198ea73c.js" as="script"><link rel="prefetch" href="/assets/index.html-b91a41ec.js" as="script"><link rel="prefetch" href="/assets/index.html-e5793540.js" as="script"><link rel="prefetch" href="/assets/index.html-d1be2bdf.js" as="script"><link rel="prefetch" href="/assets/index.html-099d1085.js" as="script"><link rel="prefetch" href="/assets/index.html-eaf46459.js" as="script"><link rel="prefetch" href="/assets/index.html-5f53e82b.js" as="script"><link rel="prefetch" href="/assets/index.html-8e244331.js" as="script"><link rel="prefetch" href="/assets/index.html-887f331c.js" as="script"><link rel="prefetch" href="/assets/index.html-6b2dddfe.js" as="script"><link rel="prefetch" href="/assets/index.html-90c123f7.js" as="script"><link rel="prefetch" href="/assets/index.html-cb38650d.js" as="script"><link rel="prefetch" href="/assets/index.html-39487905.js" as="script"><link rel="prefetch" href="/assets/index.html-fb5af63a.js" as="script"><link rel="prefetch" href="/assets/index.html-41c29250.js" as="script"><link rel="prefetch" href="/assets/index.html-8f79b4a5.js" as="script"><link rel="prefetch" href="/assets/index.html-92b01f32.js" as="script"><link rel="prefetch" href="/assets/index.html-165066d7.js" as="script"><link rel="prefetch" href="/assets/index.html-8320eb84.js" as="script"><link rel="prefetch" href="/assets/index.html-6170edc8.js" as="script"><link rel="prefetch" href="/assets/index.html-a748e239.js" as="script"><link rel="prefetch" href="/assets/index.html-5ff5f802.js" as="script"><link rel="prefetch" href="/assets/index.html-62758610.js" as="script"><link rel="prefetch" href="/assets/index.html-bcb79be2.js" as="script"><link rel="prefetch" href="/assets/index.html-dbbbcf6f.js" as="script"><link rel="prefetch" href="/assets/index.html-43b2b721.js" as="script"><link rel="prefetch" href="/assets/index.html-cda4bf0e.js" as="script"><link rel="prefetch" href="/assets/index.html-b9f54fca.js" as="script"><link rel="prefetch" href="/assets/index.html-14989d3c.js" as="script"><link rel="prefetch" href="/assets/index.html-615a31a6.js" as="script"><link rel="prefetch" href="/assets/index.html-d78bbdbc.js" as="script"><link rel="prefetch" href="/assets/index.html-8990a366.js" as="script"><link rel="prefetch" href="/assets/index.html-0e1eec69.js" as="script"><link rel="prefetch" href="/assets/index.html-8452fc85.js" as="script"><link rel="prefetch" href="/assets/index.html-446135e6.js" as="script"><link rel="prefetch" href="/assets/index.html-e8830bfe.js" as="script"><link rel="prefetch" href="/assets/index.html-9395fd4b.js" as="script"><link rel="prefetch" href="/assets/index.html-808a31e1.js" as="script"><link rel="prefetch" href="/assets/index.html-3e429ac3.js" as="script"><link rel="prefetch" href="/assets/intro.html-5a2fd780.js" as="script"><link rel="prefetch" href="/assets/tool.html-6b1587ae.js" as="script"><link rel="prefetch" href="/assets/dst.html-f96585c7.js" as="script"><link rel="prefetch" href="/assets/dstm.html-6ea68dba.js" as="script"><link rel="prefetch" href="/assets/k8s_install.html-eb675a78.js" as="script"><link rel="prefetch" href="/assets/pic.html-1e597665.js" as="script"><link rel="prefetch" href="/assets/ssl_cert_collect.html-2c028bf7.js" as="script"><link rel="prefetch" href="/assets/statistic.html-611ddb15.js" as="script"><link rel="prefetch" href="/assets/vuepresshope.html-0a34b917.js" as="script"><link rel="prefetch" href="/assets/2023_01_22.html-369aee71.js" as="script"><link rel="prefetch" href="/assets/2023_02_27.html-ef190b55.js" as="script"><link rel="prefetch" href="/assets/2023_10_09.html-e1285e31.js" as="script"><link rel="prefetch" href="/assets/2024_02_27.html-db4783f2.js" as="script"><link rel="prefetch" href="/assets/2024_06_03.html-da3276c8.js" as="script"><link rel="prefetch" href="/assets/bloodborn.html-9507b41f.js" as="script"><link rel="prefetch" href="/assets/darksoul1.html-9ae98289.js" as="script"><link rel="prefetch" href="/assets/darksoul2.html-236dd818.js" as="script"><link rel="prefetch" href="/assets/darksoul3.html-25938924.js" as="script"><link rel="prefetch" href="/assets/divinity.html-9e8bcb13.js" as="script"><link rel="prefetch" href="/assets/eastward.html-c5e7f999.js" as="script"><link rel="prefetch" href="/assets/elden_ring.html-be64890e.js" as="script"><link rel="prefetch" href="/assets/firework.html-f6d79ae3.js" as="script"><link rel="prefetch" href="/assets/gp.html-6b16e062.js" as="script"><link rel="prefetch" href="/assets/gujianqitan.html-62758e29.js" as="script"><link rel="prefetch" href="/assets/kingdom_come.html-2e7c0e1d.js" as="script"><link rel="prefetch" href="/assets/mc.html-150f1990.js" as="script"><link rel="prefetch" href="/assets/pzb.html-bb9024c1.js" as="script"><link rel="prefetch" href="/assets/re2.html-5a972444.js" as="script"><link rel="prefetch" href="/assets/sekrio.html-83283861.js" as="script"><link rel="prefetch" href="/assets/witcher.html-b9f4c3c3.js" as="script"><link rel="prefetch" href="/assets/dockermem.html-337ebd25.js" as="script"><link rel="prefetch" href="/assets/go_bug_of_hertz_limiter.html-63f41a35.js" as="script"><link rel="prefetch" href="/assets/goland_invalid_ref.html-54a164be.js" as="script"><link rel="prefetch" href="/assets/gotime.html-42ee099e.js" as="script"><link rel="prefetch" href="/assets/hack.html-83d5f3ea.js" as="script"><link rel="prefetch" href="/assets/linuxexe.html-90482a33.js" as="script"><link rel="prefetch" href="/assets/mysqlinject.html-309039fa.js" as="script"><link rel="prefetch" href="/assets/mysqlpassword.html-8964a53d.js" as="script"><link rel="prefetch" href="/assets/oom_pprof.html-65872757.js" as="script"><link rel="prefetch" href="/assets/redisdataloss.html-59e9f122.js" as="script"><link rel="prefetch" href="/assets/binary_heap.html-d0328bb1.js" as="script"><link rel="prefetch" href="/assets/binary_tree.html-739f4b6f.js" as="script"><link rel="prefetch" href="/assets/dequeue.html-88d9a596.js" as="script"><link rel="prefetch" href="/assets/sort.html-5f5dfc96.js" as="script"><link rel="prefetch" href="/assets/fluttertry.html-aba1b6ad.js" as="script"><link rel="prefetch" href="/assets/toml.html-a14eb409.js" as="script"><link rel="prefetch" href="/assets/unicode.html-cf1fcab6.js" as="script"><link rel="prefetch" href="/assets/bitcask.html-f79296be.js" as="script"><link rel="prefetch" href="/assets/docker_install_mariadb.html-fd3076c4.js" as="script"><link rel="prefetch" href="/assets/docker_install_mongo.html-0b588cfc.js" as="script"><link rel="prefetch" href="/assets/docker_install_mysql.html-d6448bac.js" as="script"><link rel="prefetch" href="/assets/docker_install_postgres.html-f7f59456.js" as="script"><link rel="prefetch" href="/assets/docker_install_redis.html-b6874743.js" as="script"><link rel="prefetch" href="/assets/index_length_exceed.html-698bb60b.js" as="script"><link rel="prefetch" href="/assets/wal_in_leveldb.html-16a234e6.js" as="script"><link rel="prefetch" href="/assets/0.dcoker.html-6a79bac8.js" as="script"><link rel="prefetch" href="/assets/1.start.html-53589d17.js" as="script"><link rel="prefetch" href="/assets/docker_mysql.html-905e6cf6.js" as="script"><link rel="prefetch" href="/assets/docker_nginx.html-a5d19fac.js" as="script"><link rel="prefetch" href="/assets/expand.html-af4b9008.js" as="script"><link rel="prefetch" href="/assets/0.introduction.html-e307eee6.js" as="script"><link rel="prefetch" href="/assets/1.repo.html-da19fad8.js" as="script"><link rel="prefetch" href="/assets/2.branch.html-d51b15a3.js" as="script"><link rel="prefetch" href="/assets/3.remote.html-9974a68f.js" as="script"><link rel="prefetch" href="/assets/4.gitserver.html-58a214e9.js" as="script"><link rel="prefetch" href="/assets/autotoolbox.html-8e990a88.js" as="script"><link rel="prefetch" href="/assets/bitflag.html-6e2bcb8b.js" as="script"><link rel="prefetch" href="/assets/geo2ip.html-76ba27d8.js" as="script"><link rel="prefetch" href="/assets/go_ip2loc.html-7055e40a.js" as="script"><link rel="prefetch" href="/assets/go_tail_read_file.html-d6b6aea8.js" as="script"><link rel="prefetch" href="/assets/makefile.html-35622f67.js" as="script"><link rel="prefetch" href="/assets/pipeline.html-7610ae03.js" as="script"><link rel="prefetch" href="/assets/registry.html-e01ad0e5.js" as="script"><link rel="prefetch" href="/assets/remotedev.html-cb9d8358.js" as="script"><link rel="prefetch" href="/assets/clash_on_linux.html-1dfeb549.js" as="script"><link rel="prefetch" href="/assets/debian12_install.html-96968820.js" as="script"><link rel="prefetch" href="/assets/linuxservice.html-0e0b4d30.js" as="script"><link rel="prefetch" href="/assets/nat_loss.html-82533ca2.js" as="script"><link rel="prefetch" href="/assets/00.start.html-300529dd.js" as="script"><link rel="prefetch" href="/assets/01.principle.html-b92b9f10.js" as="script"><link rel="prefetch" href="/assets/02.create.html-d8fdab92.js" as="script"><link rel="prefetch" href="/assets/03.structure.html-53b227b7.js" as="script"><link rel="prefetch" href="/assets/04.behavior.html-59d810eb.js" as="script"><link rel="prefetch" href="/assets/pypi_upload.html-b8c22c80.js" as="script"><link rel="prefetch" href="/assets/install.html-1893ee21.js" as="script"><link rel="prefetch" href="/assets/win10_reset.html-6303a52e.js" as="script"><link rel="prefetch" href="/assets/404.html-be487d22.js" as="script"><link rel="prefetch" href="/assets/index.html-c0a5e4e8.js" as="script"><link rel="prefetch" href="/assets/index.html-304d29c6.js" as="script"><link rel="prefetch" href="/assets/index.html-738fa7ec.js" as="script"><link rel="prefetch" href="/assets/index.html-82473335.js" as="script"><link rel="prefetch" href="/assets/index.html-6c06f694.js" as="script"><link rel="prefetch" href="/assets/index.html-bd809d30.js" as="script"><link rel="prefetch" href="/assets/index.html-ac20c497.js" as="script"><link rel="prefetch" href="/assets/index.html-0f244c74.js" as="script"><link rel="prefetch" href="/assets/index.html-c798d878.js" as="script"><link rel="prefetch" href="/assets/index.html-73204ea6.js" as="script"><link rel="prefetch" href="/assets/index.html-42322aea.js" as="script"><link rel="prefetch" href="/assets/index.html-ab4ad3dd.js" as="script"><link rel="prefetch" href="/assets/index.html-b1a73b48.js" as="script"><link rel="prefetch" href="/assets/index.html-c204690a.js" as="script"><link rel="prefetch" href="/assets/index.html-da391368.js" as="script"><link rel="prefetch" href="/assets/index.html-75bff613.js" as="script"><link rel="prefetch" href="/assets/index.html-44ae7e36.js" as="script"><link rel="prefetch" href="/assets/index.html-0be36716.js" as="script"><link rel="prefetch" href="/assets/index.html-25f4d591.js" as="script"><link rel="prefetch" href="/assets/index.html-7bac81ed.js" as="script"><link rel="prefetch" href="/assets/index.html-d7e85a08.js" as="script"><link rel="prefetch" href="/assets/index.html-9a9c668f.js" as="script"><link rel="prefetch" href="/assets/index.html-49ff38ca.js" as="script"><link rel="prefetch" href="/assets/index.html-c6f09ad2.js" as="script"><link rel="prefetch" href="/assets/index.html-3f39d128.js" as="script"><link rel="prefetch" href="/assets/index.html-e68c4f36.js" as="script"><link rel="prefetch" href="/assets/index.html-e76a6587.js" as="script"><link rel="prefetch" href="/assets/index.html-7f6ba9f9.js" as="script"><link rel="prefetch" href="/assets/index.html-49df5c09.js" as="script"><link rel="prefetch" href="/assets/index.html-8321355a.js" as="script"><link rel="prefetch" href="/assets/index.html-a792298d.js" as="script"><link rel="prefetch" href="/assets/index.html-2c1c4141.js" as="script"><link rel="prefetch" href="/assets/index.html-04d5fbbd.js" as="script"><link rel="prefetch" href="/assets/index.html-fc9f8646.js" as="script"><link rel="prefetch" href="/assets/index.html-0ba66206.js" as="script"><link rel="prefetch" href="/assets/index.html-54b8486a.js" as="script"><link rel="prefetch" href="/assets/index.html-c761bb76.js" as="script"><link rel="prefetch" href="/assets/index.html-750556d1.js" as="script"><link rel="prefetch" href="/assets/index.html-a9441176.js" as="script"><link rel="prefetch" href="/assets/index.html-bd1c83d6.js" as="script"><link rel="prefetch" href="/assets/index.html-80eff800.js" as="script"><link rel="prefetch" href="/assets/index.html-5d17fbc6.js" as="script"><link rel="prefetch" href="/assets/index.html-c703ae37.js" as="script"><link rel="prefetch" href="/assets/index.html-e74ad0cf.js" as="script"><link rel="prefetch" href="/assets/index.html-97fa44fa.js" as="script"><link rel="prefetch" href="/assets/index.html-5019f874.js" as="script"><link rel="prefetch" href="/assets/index.html-13413135.js" as="script"><link rel="prefetch" href="/assets/index.html-a7f96271.js" as="script"><link rel="prefetch" href="/assets/index.html-0112dc11.js" as="script"><link rel="prefetch" href="/assets/index.html-124731f6.js" as="script"><link rel="prefetch" href="/assets/index.html-c59a7f83.js" as="script"><link rel="prefetch" href="/assets/index.html-389025e4.js" as="script"><link rel="prefetch" href="/assets/index.html-5509b524.js" as="script"><link rel="prefetch" href="/assets/index.html-7067d916.js" as="script"><link rel="prefetch" href="/assets/index.html-903fbab1.js" as="script"><link rel="prefetch" href="/assets/index.html-440d9a81.js" as="script"><link rel="prefetch" href="/assets/index.html-abaad5d4.js" as="script"><link rel="prefetch" href="/assets/index.html-7995b310.js" as="script"><link rel="prefetch" href="/assets/index.html-2109a360.js" as="script"><link rel="prefetch" href="/assets/index.html-96026a1d.js" as="script"><link rel="prefetch" href="/assets/index.html-beef0a4a.js" as="script"><link rel="prefetch" href="/assets/index.html-4b7c149e.js" as="script"><link rel="prefetch" href="/assets/index.html-f22f9dd0.js" as="script"><link rel="prefetch" href="/assets/index.html-f8f67402.js" as="script"><link rel="prefetch" href="/assets/index.html-47ff8fbd.js" as="script"><link rel="prefetch" href="/assets/index.html-c519c91e.js" as="script"><link rel="prefetch" href="/assets/index.html-d3f4ca96.js" as="script"><link rel="prefetch" href="/assets/index.html-1bf21718.js" as="script"><link rel="prefetch" href="/assets/index.html-b2aa734c.js" as="script"><link rel="prefetch" href="/assets/index.html-1fa17fe8.js" as="script"><link rel="prefetch" href="/assets/index.html-ea5a4e61.js" as="script"><link rel="prefetch" href="/assets/index.html-48c2d102.js" as="script"><link rel="prefetch" href="/assets/index.html-65deefea.js" as="script"><link rel="prefetch" href="/assets/index.html-a842acfd.js" as="script"><link rel="prefetch" href="/assets/index.html-3b16b34a.js" as="script"><link rel="prefetch" href="/assets/index.html-ee488618.js" as="script"><link rel="prefetch" href="/assets/index.html-12ddaec3.js" as="script"><link rel="prefetch" href="/assets/index.html-046ebc4d.js" as="script"><link rel="prefetch" href="/assets/index.html-19168858.js" as="script"><link rel="prefetch" href="/assets/index.html-4c6f438f.js" as="script"><link rel="prefetch" href="/assets/index.html-1deb3541.js" as="script"><link rel="prefetch" href="/assets/index.html-280f8c1d.js" as="script"><link rel="prefetch" href="/assets/index.html-07c98eb9.js" as="script"><link rel="prefetch" href="/assets/index.html-1bffefe4.js" as="script"><link rel="prefetch" href="/assets/index.html-91d87f46.js" as="script"><link rel="prefetch" href="/assets/index.html-d69f98eb.js" as="script"><link rel="prefetch" href="/assets/index.html-fdc7d60c.js" as="script"><link rel="prefetch" href="/assets/index.html-cfc41346.js" as="script"><link rel="prefetch" href="/assets/index.html-29a0e884.js" as="script"><link rel="prefetch" href="/assets/index.html-6ef7253b.js" as="script"><link rel="prefetch" href="/assets/index.html-883486af.js" as="script"><link rel="prefetch" href="/assets/index.html-61fa09a7.js" as="script"><link rel="prefetch" href="/assets/index.html-67108f2b.js" as="script"><link rel="prefetch" href="/assets/index.html-a320f9e5.js" as="script"><link rel="prefetch" href="/assets/index.html-a69df5ea.js" as="script"><link rel="prefetch" href="/assets/index.html-73819190.js" as="script"><link rel="prefetch" href="/assets/index.html-95fab58d.js" as="script"><link rel="prefetch" href="/assets/index.html-3c2f9a87.js" as="script"><link rel="prefetch" href="/assets/index.html-ae66f085.js" as="script"><link rel="prefetch" href="/assets/index.html-fab5d4c1.js" as="script"><link rel="prefetch" href="/assets/index.html-de02c408.js" as="script"><link rel="prefetch" href="/assets/index.html-4e7dc777.js" as="script"><link rel="prefetch" href="/assets/index.html-920a6d92.js" as="script"><link rel="prefetch" href="/assets/index.html-df8b77dd.js" as="script"><link rel="prefetch" href="/assets/index.html-f431c612.js" as="script"><link rel="prefetch" href="/assets/index.html-c1150ca2.js" as="script"><link rel="prefetch" href="/assets/index.html-e4f4dd58.js" as="script"><link rel="prefetch" href="/assets/index.html-fab1cb26.js" as="script"><link rel="prefetch" href="/assets/index.html-a188d1aa.js" as="script"><link rel="prefetch" href="/assets/index.html-8b98080a.js" as="script"><link rel="prefetch" href="/assets/index.html-ba477663.js" as="script"><link rel="prefetch" href="/assets/index.html-bf3104b7.js" as="script"><link rel="prefetch" href="/assets/index.html-2ce8c456.js" as="script"><link rel="prefetch" href="/assets/index.html-04e214f7.js" as="script"><link rel="prefetch" href="/assets/index.html-58b26096.js" as="script"><link rel="prefetch" href="/assets/index.html-84d6a204.js" as="script"><link rel="prefetch" href="/assets/index.html-7b24ba64.js" as="script"><link rel="prefetch" href="/assets/index.html-0936060a.js" as="script"><link rel="prefetch" href="/assets/index.html-8a5d7176.js" as="script"><link rel="prefetch" href="/assets/index.html-b1228c12.js" as="script"><link rel="prefetch" href="/assets/index.html-24aa6fb4.js" as="script"><link rel="prefetch" href="/assets/index.html-25bdd0f4.js" as="script"><link rel="prefetch" href="/assets/index.html-d18abf5a.js" as="script"><link rel="prefetch" href="/assets/index.html-613ad2a0.js" as="script"><link rel="prefetch" href="/assets/index.html-e821ca32.js" as="script"><link rel="prefetch" href="/assets/index.html-6d5adef1.js" as="script"><link rel="prefetch" href="/assets/index.html-05297341.js" as="script"><link rel="prefetch" href="/assets/index.html-e53e1162.js" as="script"><link rel="prefetch" href="/assets/index.html-48459c06.js" as="script"><link rel="prefetch" href="/assets/index.html-1e528248.js" as="script"><link rel="prefetch" href="/assets/index.html-25dddc9e.js" as="script"><link rel="prefetch" href="/assets/index.html-e5b055d2.js" as="script"><link rel="prefetch" href="/assets/index.html-941d503c.js" as="script"><link rel="prefetch" href="/assets/index.html-219a825a.js" as="script"><link rel="prefetch" href="/assets/index.html-d01dd6bf.js" as="script"><link rel="prefetch" href="/assets/index.html-7e1318d1.js" as="script"><link rel="prefetch" href="/assets/index.html-1373db65.js" as="script"><link rel="prefetch" href="/assets/index.html-fd425b41.js" as="script"><link rel="prefetch" href="/assets/index.html-177d3552.js" as="script"><link rel="prefetch" href="/assets/index.html-7e31764b.js" as="script"><link rel="prefetch" href="/assets/index.html-88289777.js" as="script"><link rel="prefetch" href="/assets/index.html-ba303050.js" as="script"><link rel="prefetch" href="/assets/index.html-313182ee.js" as="script"><link rel="prefetch" href="/assets/index.html-30c6eecb.js" as="script"><link rel="prefetch" href="/assets/index.html-4a3a8d37.js" as="script"><link rel="prefetch" href="/assets/index.html-7a4e17a8.js" as="script"><link rel="prefetch" href="/assets/index.html-0cf6e9fd.js" as="script"><link rel="prefetch" href="/assets/giscus-16d370b8.js" as="script"><link rel="prefetch" href="/assets/auto-ba5ecab5.js" as="script"><link rel="prefetch" href="/assets/index-b03bef79.js" as="script"><link rel="prefetch" href="/assets/flowchart-35969cab.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-e1f8faee.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-30be9ea9.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-6e84c481.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-2a59c215.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-6e6cbe40.js" as="script"><link rel="prefetch" href="/assets/SearchResult-0e23197a.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><!--[--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="å¯’æ±Ÿè“‘ç¬ ç¿"><!----><span class="site-name hide-in-pad">å¯’æ±Ÿè“‘ç¬ ç¿</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/category/%E6%8A%80%E6%9C%AF%E6%97%A5%E5%BF%97/" class="nav-link" aria-label="æŠ€æœ¯æ—¥å¿—"><span class="font-icon icon iconfont icon-build" style=""></span>æŠ€æœ¯æ—¥å¿—<!----></a></div><div class="nav-item hide-in-mobile"><a href="/category/%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/" class="nav-link" aria-label="é—®é¢˜è®°å½•"><span class="font-icon icon iconfont icon-config" style=""></span>é—®é¢˜è®°å½•<!----></a></div><div class="nav-item hide-in-mobile"><a href="/category/%E7%94%9F%E6%B4%BB%E9%9A%8F%E7%AC%94/" class="nav-link" aria-label="ç”Ÿæ´»éšç¬”"><span class="font-icon icon iconfont icon-edit" style=""></span>ç”Ÿæ´»éšç¬”<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="å…¶å®ƒåˆ†ç±»"><span class="title"><span class="font-icon icon iconfont icon-guide" style=""></span>å…¶å®ƒåˆ†ç±»</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>ç¼–ç¨‹è¯­è¨€</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/category/go/" class="nav-link" aria-label="Golang"><!---->Golang<!----></a></li><li class="dropdown-subitem"><a href="/category/rust/" class="nav-link" aria-label="Rust"><!---->Rust<!----></a></li><li class="dropdown-subitem"><a href="/category/python/" class="nav-link" aria-label="Python"><!---->Python<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>æ“ä½œç³»ç»Ÿ</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/category/linux/" class="nav-link" aria-label="Linux"><!---->Linux<!----></a></li><li class="dropdown-subitem"><a href="/category/windows/" class="nav-link" aria-label="Windows"><!---->Windows<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>å¼€å‘å·¥å…·</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/category/git/" class="nav-link" aria-label="Git"><!---->Git<!----></a></li><li class="dropdown-subitem"><a href="/category/docker/" class="nav-link" aria-label="Docker"><!---->Docker<!----></a></li><li class="dropdown-subitem"><a href="/category/æ•°æ®åº“/" class="nav-link" aria-label="æ•°æ®åº“"><!---->æ•°æ®åº“<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>åŸºç¡€çŸ¥è¯†</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/category/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="nav-link" aria-label="è®¾è®¡æ¨¡å¼"><!---->è®¾è®¡æ¨¡å¼<!----></a></li><li class="dropdown-subitem"><a href="/category/%E7%AE%97%E6%B3%95/" class="nav-link" aria-label="ç®—æ³•"><!---->ç®—æ³•<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>é—²è¯æ°´æ–‡</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/category/%E6%B8%B8%E6%88%8F%E6%9D%82%E8%B0%88/" class="nav-link" aria-label="æ¸¸æˆæ‚è°ˆ"><!---->æ¸¸æˆæ‚è°ˆ<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/tool.html" class="nav-link" aria-label="å·¥å…·ç®±"><span class="font-icon icon iconfont icon-operate" style=""></span>å·¥å…·ç®±<!----></a></div><div class="nav-item hide-in-mobile"><a href="/timeline" class="nav-link" aria-label="æ—¶é—´è½´"><span class="font-icon icon iconfont icon-time" style=""></span>æ—¶é—´è½´<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><!----><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!--[--><button class="search-pro-button" role="search" aria-label="æœç´¢"><svg xmlns="http://www.w3.org/2000/svg" class="icon search-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="search icon"><path d="M192 480a256 256 0 1 1 512 0 256 256 0 0 1-512 0m631.776 362.496-143.2-143.168A318.464 318.464 0 0 0 768 480c0-176.736-143.264-320-320-320S128 303.264 128 480s143.264 320 320 320a318.016 318.016 0 0 0 184.16-58.592l146.336 146.368c12.512 12.48 32.768 12.48 45.28 0 12.48-12.512 12.48-32.768 0-45.28"></path></svg><div class="placeholder">æœç´¢</div><div class="key-hints"><kbd class="key">Ctrl</kbd><kbd class="key">K</kbd></div></button><!--]--><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->RiverDB</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://mrhope.site" target="_blank" rel="noopener noreferrer">å¯’æ±Ÿè“‘ç¬ ç¿</a></span><span property="author" content="å¯’æ±Ÿè“‘ç¬ ç¿"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-12-02T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 42 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT42M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category7 clickable" role="navigation">db</span><meta property="articleSection" content="db"></span><span class="page-tag-info" aria-label="æ ‡ç­¾ğŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag7 clickable" role="navigation">NoSQL</span><span class="page-tag-item tag7 clickable" role="navigation">Bitcask</span><span class="page-tag-item tag7 clickable" role="navigation">é€ è½®å­</span><meta property="keywords" content="NoSQL,Bitcask,é€ è½®å­"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#å¼€å¤´" class="router-link-active router-link-exact-active toc-link level2">å¼€å¤´</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#å­˜å‚¨" class="router-link-active router-link-exact-active toc-link level2">å­˜å‚¨</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#ç´¢å¼•" class="router-link-active router-link-exact-active toc-link level2">ç´¢å¼•</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#äº‹åŠ¡" class="router-link-active router-link-exact-active toc-link level2">äº‹åŠ¡</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#åˆå¹¶" class="router-link-active router-link-exact-active toc-link level2">åˆå¹¶</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#å¤‡ä»½" class="router-link-active router-link-exact-active toc-link level2">å¤‡ä»½</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#ç›‘å¬" class="router-link-active router-link-exact-active toc-link level2">ç›‘å¬</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/code/db/river_db.html#æ€»ç»“" class="router-link-active router-link-exact-active toc-link level2">æ€»ç»“</a></li><!----><!--]--></ul></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h1 id="riverdb" tabindex="-1"><a class="header-anchor" href="#riverdb" aria-hidden="true">#</a> RiverDB</h1><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312031440217.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><!-- more --><hr><h2 id="å¼€å¤´" tabindex="-1"><a class="header-anchor" href="#å¼€å¤´" aria-hidden="true">#</a> å¼€å¤´</h2><p>å¤§æ¦‚åœ¨11æœˆä»½ï¼Œæˆ‘å†™äº†ä¸¤ç¯‡æ–‡ç« ï¼Œä¸€ç¯‡è®²çš„æ˜¯Bitcaskï¼Œå¦ä¸€ä¸ªè®²çš„æ˜¯Write Ahead Logï¼Œè¿™ä¸¤ä¸ªä¸œè¥¿è·Ÿæ•°æ®åº“éƒ½æœ‰ç€è«å¤§çš„å…³ç³»ã€‚å†™å®Œä»¥åï¼Œæˆ‘ä¾¿èŒç”Ÿäº†ä¸€ä¸ªæƒ³æ³•ï¼Œèƒ½ä¸èƒ½è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªæ•°æ®åº“ï¼Œå› ä¸ºåœ¨æ­¤å‰æ•°æ®åº“å¯¹æˆ‘æ¥è¯´éƒ½åªæ˜¯ä½¿ç”¨è€Œå·²ï¼Œå†™ä¸€ä¸ªæ•°æ®åº“ä¼¼ä¹æœ‰ç‚¹é¥ä¸å¯åŠï¼Œå¹¶ä¸”ä»æ¥æ²¡æœ‰æ¥è§¦è¿‡è¿™äº›ã€‚æƒ³åˆ°å°±åšï¼Œäºæ˜¯æˆ‘èŠ±äº†ç‚¹æ—¶é—´å»å‚è€ƒäº†Githubä¸Šæ¯”è¾ƒçŸ¥åçš„å¼€æºæ•°æ®åº“åŒ…æ‹¬ï¼šBadgerï¼ŒLevelDBï¼Œgodisï¼ŒRoseDBï¼ŒNutsDBç­‰</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312022119275.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸»æµæ•°æ®åº“çš„å­˜å‚¨æ¨¡å‹æœ‰B+Treeå’ŒLSMï¼Œæœ€ç»ˆé€‰æ‹©äº†ä½¿ç”¨Bitcaskå­˜å‚¨æ¨¡å‹æ¥ä½œä¸ºæˆ‘çš„å…¥é—¨é€‰æ‹©ï¼Œå®ƒå°±åƒæ˜¯ç®€åŒ–ç‰ˆçš„LSMï¼Œå› ä¸ºå®ƒè¶³å¤Ÿç®€å•ï¼Œä¸è‡³äºå¤ªéš¾ä¸€ä¸Šæ¥ç›´æ¥åŠé€€ï¼Œä¹Ÿæ˜¯æˆ‘é€‰æ‹©å®ƒçš„ä¸€å¤§åŸå› ï¼Œå‡†å¤‡å¦¥å½“åï¼Œä¾¿å¼€å§‹ç€æ‰‹æœç€è¿™ä¸ªæœªçŸ¥çš„é¢†åŸŸçª¥æ¢ä¸€ç•ªã€‚</p><p>æ­£æ‰€è°“ä¸‡äº‹å¼€å¤´éš¾ï¼Œç¬¬ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ•°æ®åº“å«ä»€ä¹ˆåå­—ï¼Œè™½ç„¶å†™å‡ºæ¥å¯èƒ½æ²¡äººç”¨ï¼Œä½†å¥½æ­¹è¦æœ‰ä¸€ä¸ªåå­—ã€‚åœ¨æ€ç´¢ä¸€ç•ªè¿‡åï¼Œå†³å®šå–åä¸º<code>river</code>ï¼Œè¿™ä¸ªåå­—æ¥è‡ªåˆä¸­æ—¶å€™ç©çš„ä¸€æ¬¾æ¸¸æˆã€Šå»æœˆçƒã€‹ï¼Œé‡Œé¢çš„å¥³ä¸»å°±å«riverã€‚åœ¨å»ºå®Œgithubä»“åº“åï¼Œä¾¿å¼€å§‹æ€è€ƒä¸€ä¸ªæ•°æ®åº“è¦æœ‰ä»€ä¹ˆï¼Œé¦–å…ˆå¯ä»¥ç¡®å®šçš„æ˜¯è¿™æ˜¯ä¸€ä¸ªKVæ•°æ®åº“ï¼Œæœ€åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥è‚¯å®šæ˜¯è¦ä¿è¯çš„ï¼Œç„¶åå°±æ˜¯TTLå¯ä»¥æ•´ä¸€ä¸ªï¼Œç»™é”®å€¼ä¸Šä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼Œæ—¢ç„¶æœ‰äº†TTLï¼Œè‚¯å®šè¦èƒ½å•ç‹¬æŸ¥è¯¢å’Œä¿®æ”¹TTLçš„åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸€ä¸ªæœ€æœ€é‡è¦çš„å°±æ˜¯äº‹åŠ¡æ”¯æŒï¼Œä»¥åŠæ‰¹é‡å†™å…¥æ•°æ®å’Œæ‰¹é‡åˆ é™¤æ•°æ®ï¼Œæ¢³ç†ä¸€ä¸‹å°±æ˜¯</p><ul><li>åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥</li><li>TTLè¿‡æœŸæ—¶é—´æ”¯æŒ</li><li>äº‹åŠ¡æ”¯æŒ</li><li>æ‰¹é‡å¤„ç†æ•°æ®</li><li>èŒƒå›´æ‰«æå’ŒåŒ¹é…</li></ul><p>å¯¹äº†è¿˜æœ‰ä¸€ä¸ªå¿˜äº†å°±æ˜¯æ•°æ®åº“çš„å¤‡ä»½å’Œè¿˜åŸï¼Œè¿™ä¸ªä¹Ÿè›®é‡è¦çš„ï¼Œåœ¨æ¢³ç†å¥½äº†è¿™äº›å¤§ä½“çš„åŠŸèƒ½ä»¥åå°±å¯ä»¥å¼€å§‹ç€æ‰‹å»è®¾è®¡ä¸€äº›ç»†èŠ‚äº†ã€‚</p><h2 id="å­˜å‚¨" tabindex="-1"><a class="header-anchor" href="#å­˜å‚¨" aria-hidden="true">#</a> å­˜å‚¨</h2><p>é¦–å…ˆå°±æ˜¯å¦‚ä½•åœ¨ç£ç›˜ä¸Šå­˜æ”¾æ•°æ®ï¼Œæ—¢ç„¶é‡‡ç”¨äº†Bitcaskä½œä¸ºå­˜å‚¨æ¨¡å‹ï¼Œé‚£ä¹ˆæœ€ç®€å•ç›´æ¥çš„æ–¹æ³•å°±æ˜¯ä¸€æ¡ä¸€æ¡recordå­˜ï¼Œä¸€æ¡ä¸€æ¡recordè¯»ï¼Œè¿™æ ·åšæœ€ç®€å•ï¼Œä¹Ÿæœ€å®¹æ˜“å®ç°ã€‚ä½†æ˜¯ï¼éå¸¸é‡è¦çš„ä¸€ç‚¹å°±æ˜¯ï¼Œå‰é¢å·²ç»æåˆ°è¿‡Bitcaskä¸é€‚åˆå­˜å¤§å—æ•°æ®ï¼Œåœ¨å‡ MBä»¥ä¸Šæ•°æ®å°±å¯ä»¥è¢«ç§°ä¸ºå¤§å—æ•°æ®äº†ï¼ŒBitcaskåŸæœ‰çš„Recordæ˜¯ç”±å‡ ä¸ªéƒ¨åˆ†ç»„æˆ</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312022243634.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>headeréƒ¨åˆ†ä¸»è¦æ˜¯recordçš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬crcï¼Œæ—¶é—´æˆ³ï¼Œkeyçš„é•¿åº¦ï¼Œvalueçš„é•¿åº¦ï¼Œè¯»å–ä¸€æ¡recordï¼Œéœ€è¦ä¸¤æ¬¡IOï¼Œç¬¬ä¸€æ¬¡è¯»headerï¼Œç¡®è®¤æ•°æ®çš„é•¿åº¦ï¼Œç¬¬äºŒæ¬¡ç¡®è®¤æ•°æ®é•¿åº¦è¿‡åæ‰èƒ½å»è¯»å–æ•°æ®ã€‚å®é™…ä¸Šå­˜æ”¾çš„æ•°æ®éƒ½ä¸æ˜¯ç‰¹åˆ«å¤§ï¼Œå¹³å‡å¯èƒ½åªæœ‰KBçº§åˆ«ï¼Œç”šè‡³ä¸åˆ°KBï¼Œå¯¹äºè¿™æ ·å°çš„æ•°æ®ï¼Œè¯»å–ä¸€æ¡recordè¿˜è¦è¿›è¡Œä¸¤æ¬¡IOï¼Œååˆ†çš„æµªè´¹æ€§èƒ½ã€‚</p><p>é‚£ä¹ˆå¯ä»¥è¿™æ ·è€ƒè™‘ï¼Œä¸€æ¬¡è¯»å–å›ºå®šå¤§å°çš„æ–‡ä»¶å†…å®¹åˆ°å†…å­˜ä¸­ï¼Œç§°ä¹‹ä¸ºBlockï¼Œç„¶ååœ¨å†…å­˜ä¸­ä»Blockè¯»å–æ•°æ®ï¼Œå¦‚æœæ•°æ®çš„è¶³å¤Ÿå°ï¼Œåˆšå¥½èƒ½åœ¨Blockä¸­ï¼Œé‚£ä¹ˆæŸ¥è¯¢å°±åªéœ€è¦ä¸€æ¬¡IOï¼Œåç»­è™½ç„¶ä¹Ÿæ˜¯è¦å…ˆè¯»æ•°æ®é•¿åº¦å†è¯»å®é™…æ•°æ®ï¼Œä½†ç”±äºæ˜¯åœ¨å†…å­˜ä¸­è¯»å–ï¼Œè¦æ¯”ç£ç›˜è¯»å–å¿«å¾—å¤šï¼Œè¿™ç§èƒ½è¢«Blockå®¹çº³çš„æ•°æ®ç§°ä¹‹ä¸ºChunkã€‚è€Œè¿™ä¸ªè§„åˆ™ä¹Ÿå°±æ˜¯åº”ç”¨åœ¨LevelDBçš„Walæ–‡ä»¶ä¸­ï¼Œè€ŒLevelDBé»˜è®¤çš„BlockSizeå°±æ˜¯32KBï¼Œæ¯ä¸€æ¬¡IOå›ºå®šè¯»32KBï¼Œè¿™ä¸ªå€¼å¤ªå¤§äº†ä¼šè€—è´¹å†…å­˜ï¼Œå¤ªå°äº†ä¼šé¢‘ç¹IOï¼Œå…·ä½“å¯ä»¥å»è¿™ä¸ªæ–‡ç« <a href="/post/db/wal_in_leveldb.html" class="">Wal-LevelDBä¸­çš„é¢„å†™æ—¥å¿—</a>äº†è§£ã€‚</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312031426113.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸€ä¸ªchunkç”±headerå’Œdataç»„æˆï¼Œheaderæœ€å¤§ä¸º7ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥dataæ•°æ®é•¿åº¦èŒƒå›´åœ¨[0, 32KB-7B]ï¼Œè¿™é‡Œå°†crcæ ¡éªŒä»recordæŠ½ç¦»å‡ºæ¥ï¼Œæ”¾åˆ°äº†chunkä¸­ï¼Œè¿™æ ·åœ¨è¯»å†™æ•°æ®çš„æ—¶å€™å°±ä¸éœ€è¦å†å»åšé¢å¤–çš„æ ¡éªŒã€‚æ‰€ä»¥æ•°æ®åº“å®é™…æ“ä½œçš„recordæ˜¯å­˜æ”¾åœ¨dataè¿™éƒ¨åˆ†ä¸­ï¼Œå¯¹äºä¸€æ¡è®°å½•è€Œè¨€ï¼Œå®ƒçš„å¤´éƒ¨ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆ</p><ul><li>typeï¼Œæ ‡è¯†æ“ä½œç±»å‹ï¼Œæ›´æ–°è¿˜æ˜¯åˆ é™¤</li><li>ttlï¼Œè¿‡æœŸæ—¶é—´ï¼Œå­˜æ”¾çš„æ˜¯æ¯«ç§’ï¼Œ10ä¸ªå­—èŠ‚æ˜¯64ä½æ•´æ•°å ç”¨çš„æœ€å¤§å­—èŠ‚æ•°</li><li>txn_idï¼Œäº‹åŠ¡ID</li><li>key_szï¼Œkeyçš„é•¿åº¦ï¼Œ5ä¸ªå­—èŠ‚æ˜¯32ä½æ•´æ•°æ‰€éœ€è¦çš„æœ€å¤§å­—èŠ‚æ•°</li><li>val_szï¼Œæ•°æ®çš„é•¿åº¦</li></ul><p>æ•°æ®çš„ç»„ç»‡æ ¼å¼å¤§ä½“ä¸Šå°±è®¾è®¡å®Œæ¯•äº†ï¼Œæ•°æ®åœ¨æ–‡ä»¶ä¸­çš„åˆ†å¸ƒå¤§æ¦‚å¯èƒ½æ˜¯ä¸‹å›¾çš„æ ·å­</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312031438746.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘è¿˜åœ¨å†…å­˜ä¸­åšäº†ä¸€ä¸ªç¼“å­˜ï¼Œç”±äºæ¯æ¬¡è¯»å–çš„éƒ½æ˜¯ä¸€ä¸ª32KBçš„Blockï¼Œé‚£ä¹ˆå¯ä»¥å°†é¢‘ç¹ä½¿ç”¨çš„Blockç¼“å­˜èµ·æ¥ä»è€Œå‡å°‘äº†IOæ¬¡æ•°ã€‚æ€è€ƒè¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå¦‚æœä¸€ä¸ªBlockä¸­çš„æ‰€æœ‰Chunkéƒ½è¿œå°äºBlockï¼Œé‚£ä¹ˆåªæœ‰è¯»ç¬¬ä¸€ä¸ªChunkçš„æ—¶å€™ï¼Œä¼šè¿›è¡Œæ–‡ä»¶IOï¼Œåœ¨ç¬¬ä¸€ä¸ªchunkè¯»å–å®Œæ¯•åï¼Œä¼šå°†è¿™ä¸ªBlockç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåç»­çš„Chunkå°±ä¸å†éœ€è¦ä»æ–‡ä»¶ä¸­è¯»å–ï¼Œç›´æ¥ä»å†…å­˜é‡Œé¢è¯»å–å³å¯ï¼Œè¿™æ ·å°±å¤§å¤§æé«˜è¯»å–çš„é€Ÿåº¦ã€‚ä½†ä¸€ç›´ç¼“å­˜ä¹Ÿä¸æ˜¯åŠæ³•ï¼Œå†…å­˜ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œä¹Ÿè¿˜è¦åšç´¢å¼•ï¼Œæ‰€ä»¥éœ€è¦å®šæœŸè¿›è¡Œæ·˜æ±°ï¼Œè¿™é‡Œå¯ä»¥ç”¨LRUç¼“å­˜æ¥å®ç°ã€‚</p><p>ä½¿ç”¨äº†ä¸Šè¿°çš„æ•°æ®ç»„ç»‡å½¢å¼ï¼Œå¯ä»¥ä¸€å®šç¨‹åº¦ä¸Šä¼˜åŒ–è¯»çš„æ€§èƒ½ï¼Œä¸è¿‡å†™æ€§èƒ½ä¹Ÿä¸èƒ½å¿½ç•¥ã€‚Bitcaskæœ¬èº«é‡‡ç”¨çš„æ˜¯append-onlyçš„å†™å…¥æ–¹å¼ï¼Œé¡ºåºå†™çš„æ€§èƒ½è‡ªç„¶æ˜¯è¦æ¯”éšæœºå†™è¦å¥½å¾ˆå¤šçš„ï¼Œä¸è¿‡é—®é¢˜åœ¨äºè¿™æ ·ä¼šåŒ…å«å¾ˆå¤šå†—ä½™çš„æ•°æ®ã€‚å†™æ€§èƒ½çš„ç“¶é¢ˆåœ¨ä¸Fsyncçš„æ—¶æœºï¼Œå¦‚æœæ¯ä¸€æ¬¡å†™å…¥éƒ½syncï¼Œæ•°æ®çš„æŒä¹…æ€§å¯ä»¥å¾—åˆ°å¾ˆå¥½çš„ä¿è¯ï¼Œä½†æ€§èƒ½ä¼šå¾ˆä½ï¼Œå¦‚æœä¸syncï¼Œæ€§èƒ½è‚¯å®šæ˜¯æ¯”å‰è€…è¦é«˜å¾ˆå¤šçš„ï¼Œä½†æŒä¹…æ€§éš¾ä»¥å¾—åˆ°ä¿è¯ï¼Œæ­£æ‰€è°“é±¼å’Œç†ŠæŒä¸å¯å¾—å…¼ï¼Œè¿˜å¾—æ˜¯åœ¨ä¸¤è€…ä¹‹é—´æ‰¾ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚</p><h2 id="ç´¢å¼•" tabindex="-1"><a class="header-anchor" href="#ç´¢å¼•" aria-hidden="true">#</a> ç´¢å¼•</h2><p>å¯¹äºç´¢å¼•çš„é€‰æ‹©ï¼Œæ¯”è¾ƒä¸»æµçš„é€‰æ‹©æœ‰BTreeï¼ŒSkipListï¼ŒB+Treeï¼ŒRedBlackTreeï¼Œè¿™å‡ ä¸ªéƒ½æœ‰ä¸€ä¸ªå…±åŒç‚¹å°±æ˜¯å®ƒä»¬éƒ½æ˜¯æœ‰åºçš„ï¼Œå½“ç„¶è¿˜æœ‰ä¸€ä¸ªæ— åºçš„æ•°æ®ç»“æ„å“ˆå¸Œè¡¨ï¼Œè¿™ä¸ªç›´æ¥æ’é™¤äº†ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨åšç´¢å¼•æ²¡æ³•åšèŒƒå›´æ‰«æã€‚Rediså’ŒLevelDBé¦–é€‰çš„æ˜¯SkipListï¼ŒåŸºäºæœ‰åºé“¾è¡¨çš„SkipListçš„å†™æ€§èƒ½ä¼šä¼˜ç§€ä¸€äº›ï¼ŒæŸ¥è¯¢æ€§èƒ½ç›¸å¯¹è¾ƒå¼±ï¼Œè€Œæ ‘è¿™ä¸€ç±»çš„æ•°æ®ç»“æ„æŸ¥è¯¢æ€§èƒ½ä¼˜ç§€ï¼Œå†™å…¥æ€§èƒ½ç›¸å¯¹è€Œè¨€å¼±ä¸€äº›ã€‚</p><p>è€ƒè™‘åˆ°Bitcaskå­˜å‚¨æ¨¡å‹å¹¶ä¸é€‚åˆå­˜å‚¨å¤§é‡æ•°æ®ï¼Œä¹Ÿä¸é€‚åˆå­˜å‚¨å¤§å—æ•°æ®ï¼Œåœ¨ç»¼åˆè€ƒè™‘ä¸‹ï¼Œé€‰æ‹©äº†å„æ–¹é¢æ¯”è¾ƒå¹³è¡¡çš„BTreeä½œä¸ºé¦–é€‰çš„å†…å­˜ç´¢å¼•ï¼ŒBTreeåˆå«åšå¤šè·¯å¹³è¡¡æŸ¥æ‰¾æ ‘ï¼Œä¸é€‰SkipListæ˜¯å› ä¸ºæ²¡æœ‰æ‰¾åˆ°å¾ˆå¥½çš„å¼€æºå®ç°ï¼ŒB+Treeæ›´é€‚åˆåšç£ç›˜ç´¢å¼•ï¼Œè€ŒBtreeæœ‰è°·æ­Œå¼€æºçš„åº“ï¼Œå¹¶ä¸”å¦ä¸€å¤§ä¼˜ç‚¹å°±æ˜¯è¿™ä¸ªåº“å¾ˆå¤šäººä½¿ç”¨ä¸”æ”¯æŒæ³›å‹ã€‚ä¸è¿‡å…¶å®ç´¢å¼•å¹¶ä¸åªé™äºBTreeï¼Œç´¢å¼•è¿™ä¸€å±‚åšäº†ä¸€å±‚æŠ½è±¡ï¼Œåç»­ä¹Ÿå¯ä»¥ç”¨å…¶å®ƒæ•°æ®ç»“æ„å®ç°ã€‚</p><p>æ˜¯å¦è¦è‡ªå·±æ‰‹å†™ï¼Ÿè¯´å®è¯è¿™ä¸ªæ•°æ®åº“æˆ‘è¿˜æ˜¯æƒ³ç”¨ä¸€ç”¨çš„ï¼ŒBTreeï¼ŒB+Treeéƒ½æ˜¯éå¸¸å¤æ‚çš„æ•°æ®ç»“æ„ï¼Œè‡ªå·±å†™æ˜¯èƒ½å†™ä½†ä¸ä¸€å®šèƒ½ä¿è¯èƒ½ç”¨ï¼Œæœ‰äº†ç¨³å®šæˆç†Ÿçš„å¼€æºå®ç°å¯ä»¥ä½¿ç”¨æ˜¯æœ€å¥½çš„ã€‚æˆ‘è‡ªå·±ä¹Ÿæœ‰å†™å¦ä¸€ä¸ªæ•°æ®ç»“æ„çš„åº“ï¼Œå¹¶ä¸”å…¨éƒ½æ”¯æŒæ³›å‹ï¼Œ</p><p>å¼€æºä»“åº“ï¼š<a href="https://github.com/246859/containers" target="_blank" rel="noopener noreferrer">246859/containers: base data structure and algorithm implemention in go genericity (github.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>ä¸è¿‡è¿˜åœ¨é€æ­¥å®Œå–„ï¼Œç­‰ä»¥åç¨³å®šäº†è¯´ä¸å®šå¯ä»¥ä½¿ç”¨ã€‚</p><p>é‚£ä¹ˆï¼Œå†…å­˜ç´¢å¼•å­˜ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿè¿™ä¸ªé—®é¢˜è¿˜æ˜¯æ¯”è¾ƒå¥½å›ç­”çš„ï¼Œè€ƒè™‘åˆ°å­˜å‚¨ä¸­é‡‡ç”¨çš„æ˜¯Walçš„ç»„ç»‡å½¢å¼ï¼Œç´¢å¼•ä¸­å­˜å‚¨çš„ä¿¡æ¯åº”è¯¥æœ‰</p><ul><li>å“ªä¸ªæ–‡ä»¶</li><li>å“ªä¸ªblock</li><li>chunkç›¸å¯¹äºblockçš„offses</li></ul><p>ç”¨goè¯­è¨€æè¿°çš„è¯å°±æ˜¯ä¸€ä¸ªç»“æ„ä½“</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> ChunkPos <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	<span class="token comment">// file id</span>
	Fid <span class="token builtin">uint32</span>
	<span class="token comment">// chunk in which block</span>
	Block <span class="token builtin">uint32</span>
	<span class="token comment">// chunk offset in block</span>
	Offset <span class="token builtin">int64</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ¯ä¸€ä¸ªblockå›ºå®šä¸º32KBï¼Œæ‰€ä»¥åªéœ€è¦çŸ¥é“<code>Fid</code>ï¼Œ<code>BlockId</code>ï¼Œ<code>Offset</code>è¿™ä¸‰ä¸ªä¿¡æ¯å°±å¯ä»¥å®šä½ä¸€æ¡æ•°æ®ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŠŠæ•°æ®çš„TTLä¿¡æ¯ä¹Ÿæ”¾åˆ°ç´¢å¼•ä¸­å­˜å‚¨ï¼Œè¿™æ ·è®¿é—®TTLå°±ä¸éœ€è¦æ–‡ä»¶IOäº†ã€‚</p><h2 id="äº‹åŠ¡" tabindex="-1"><a class="header-anchor" href="#äº‹åŠ¡" aria-hidden="true">#</a> äº‹åŠ¡</h2><p>å¦‚æœè¦æˆ‘è¯´æ•´ä¸ªæ•°æ®åº“å“ªä¸€ä¸ªéƒ¨åˆ†æœ€éš¾ï¼Œææ€•åªæœ‰äº‹åŠ¡äº†ï¼Œæ”¯æŒäº‹åŠ¡è¦æ»¡è¶³å››ä¸ªç‰¹æ€§ï¼ŒACIDï¼ŒåŸå­æ€§(Atmoicty)ï¼Œä¸€è‡´æ€§(Consistency)ï¼Œéš”ç¦»æ€§(Isolation)ï¼ŒDurability(æŒä¹…æ€§)ã€‚å…¶ä¸­æœ€éš¾å®ç°çš„å½“å±éš”ç¦»æ€§ï¼Œéš”ç¦»æ€§åˆåˆ†ä¸ºå››ä¸ªçº§åˆ«ï¼Œè¯»æœªæäº¤ï¼Œè¯»æäº¤ï¼Œå¯é‡å¤è¯»ï¼Œä¸²è¡ŒåŒ–ã€‚</p><p>åœ¨å†™äº‹åŠ¡è¿™å—ä¹‹å‰ï¼Œå‚è€ƒäº†ä¸‹é¢å‡ ä¸ªé¡¹ç›®</p><ul><li><p>RoseDB</p><p>å®ƒçš„v2ç‰ˆæœ¬å¯¹äºäº‹åŠ¡çš„å®ç°åªæœ‰ä¸€ä¸ªè¯»å†™é”ï¼Œä¿è¯äº†ä¸²è¡ŒåŒ–äº‹åŠ¡ã€‚</p></li><li><p>NutsDB</p><p>è·Ÿä¸Šé¢çš„ä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”¨ä¸€ä¸ªè¯»å†™é”æ¥å®ç°ä¸²è¡ŒåŒ–äº‹åŠ¡ï¼Œå¯ä»¥å¹¶å‘è¯»ï¼Œä½†æ˜¯ä¸èƒ½å¹¶å‘å†™ï¼Œå¹¶ä¸”å†™ä¼šé˜»å¡è¯»å†™äº‹åŠ¡ã€‚</p></li><li><p>Badger</p><p>badgerä¸ä¸Šé¢çš„ä¸¤ä¸ªé¡¹ç›®ä¸åŒï¼ˆåæ§½ä¸€ä¸‹badgeræºä»£ç å¯è¯»æ€§æœ‰ç‚¹å·®ï¼‰ï¼Œå®ƒæ˜¯åŸºäºLSMè€ŒéBitcaskï¼Œå¹¶ä¸”æä¾›äº†å®Œæ•´çš„MVCCäº‹åŠ¡æ”¯æŒï¼Œå¯ä»¥å¹¶å‘çš„è¿›è¡Œè¯»å†™äº‹åŠ¡ï¼Œå¤±è´¥å°±ä¼šå›æ»šã€‚</p></li></ul><p>å‰ä¸¤ä¸ªæ•°æ®åº“ä¸æ”¯æŒMVCCçš„ç†ç”±éå¸¸ç®€å•ï¼Œå› ä¸ºBitcaskæœ¬èº«å°±ä½¿ç”¨å†…å­˜æ¥åšç´¢å¼•ï¼Œå¦‚æœå®ç°MVCCäº‹åŠ¡çš„è¯ï¼Œå°±éœ€è¦åœ¨å†…å­˜ä¸­å­˜æ”¾è®¸å¤šç‰ˆæœ¬çš„ç´¢å¼•ï¼Œä½†æ˜¯å†…å­˜ç©ºé—´ä¸åƒç£ç›˜ï¼Œç£ç›˜ç©ºé—´å¤šç”¨ä¸€ç‚¹æ²¡ä»€ä¹ˆï¼Œæ‰€ä»¥Bitcaskçš„å­˜å‚¨æ–¹å¼ä¼šäº§ç”Ÿå†—ä½™æ•°æ®æ˜¯å¯ä»¥å®¹å¿çš„ï¼Œä½†å†…å­˜ç©ºé—´æ˜¯éå¸¸å®è´µçš„ï¼Œé‡‡ç”¨MVCCäº‹åŠ¡çš„è¯ä¼šå¯¼è‡´æœ‰æ•ˆç´¢å¼•çš„å¯ç”¨ç©ºé—´å—åˆ°éå¸¸å¤§çš„å½±å“ã€‚</p><p>å¤§è‡´çš„æ€è·¯å¦‚ä¸‹ï¼Œåœ¨å¼€å¯ä¸€ä¸ªäº‹åŠ¡æ—¶ä¸éœ€è¦æŒæœ‰é”ï¼Œåªæœ‰åœ¨æäº¤å’Œå›æ»šçš„æ—¶å€™æ‰éœ€è¦ã€‚åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰€æœ‰çš„ä¿®æ”¹åŠ ä¸Šäº‹åŠ¡IDåéƒ½å°†ç«‹å³å†™å…¥åˆ°æ•°æ®æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯ä¸ä¼šæ›´æ–°åˆ°æ•°æ®åº“ç´¢å¼•ä¸­ï¼Œè€Œæ˜¯å»æ›´æ–°äº‹åŠ¡ä¸­çš„ä¸´æ—¶ç´¢å¼•ï¼Œæ¯ä¸€ä¸ªäº‹åŠ¡ä¹‹é—´çš„ä¸´æ—¶ç´¢å¼•æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ— æ³•è®¿é—®ï¼Œæ‰€ä»¥äº‹åŠ¡ä¸­æ›´æ–°çš„æ•°æ®å¯¹å¤–éƒ¨æ˜¯ä¸å¯è§çš„ã€‚åœ¨æäº¤æ—¶ï¼Œé¦–å…ˆæ£€æµ‹æ˜¯å¦å‘ç”Ÿäº†äº‹åŠ¡å†²çªï¼Œå†²çªæ£€æµ‹æ€è·¯å¦‚ä¸‹ã€‚</p><ol><li><p>éå†æ‰€æœ‰å·²æäº¤çš„äº‹åŠ¡</p></li><li><p>æ£€æµ‹å…¶æäº¤æ—¶é—´æ˜¯å¦æ™šäºæœ¬æ¬¡äº‹åŠ¡çš„å¼€å§‹æ—¶é—´</p></li><li><p>å¦‚æœæ˜¯çš„è¯ï¼Œå†éå†è¯¥äº‹åŠ¡çš„å†™é›†åˆï¼Œå¦‚æœä¸æœ¬æ¬¡äº‹åŠ¡çš„è¯»é›†åˆæœ‰äº¤é›†ï¼Œè¯´æ˜æœ¬æ¬¡äº‹åŠ¡ä¸­è¯»è¿‡çš„æ•°æ®åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½è¢«ä¿®æ”¹äº†ï¼Œäºæ˜¯åˆ¤å®šä¸ºå‘ç”Ÿå†²çªã€‚</p></li><li><p>æäº¤æˆåŠŸçš„è¯å°±åŠ å…¥å·²æäº¤äº‹åŠ¡åˆ—è¡¨ä¸­</p></li><li><p>å°†äº‹åŠ¡ä¸­çš„ä¸´æ—¶ç´¢å¼•æ›´æ–°åˆ°æ•°æ®åº“ç´¢å¼•ä¸­ï¼Œç°åœ¨æ•°æ®å¯¹å¤–éƒ¨å¯è§äº†</p></li><li><p>æ’å…¥ä¸€æ¡ç‰¹æ®Šçš„è®°å½•ï¼Œé™„å¸¦ä¸Šå½“å‰äº‹åŠ¡çš„äº‹åŠ¡IDï¼Œè¡¨ç¤ºæ­¤æ¬¡äº‹åŠ¡å·²æäº¤</p></li><li><p>å¦‚æœå¤±è´¥å›æ»šçš„è¯ï¼Œä¹Ÿæ’å…¥ä¸€æ¡ç‰¹æ®Šçš„è®°å½•ï¼Œè¡¨ç¤ºæ­¤æ¬¡äº‹åŠ¡å·²å›æ»š</p></li></ol><p>æ•°æ®åº“åœ¨å¯åŠ¨æ—¶ï¼Œä¼šæŒ‰é¡ºåºéå†æ¯ä¸€ä¸ªæ•°æ®æ–‡ä»¶ä¸­çš„æ¯ä¸€æ¡æ•°æ®ï¼Œæ¯ä¸€ä¸ªæ•°æ®éƒ½æºå¸¦å¯¹åº”çš„äº‹åŠ¡IDï¼Œé¦–å…ˆä¼šæ”¶é›†å¯¹åº”äº‹åŠ¡IDçš„äº‹åŠ¡åºåˆ—ï¼Œå¦‚æœè¯»åˆ°äº†å¯¹åº”äº‹åŠ¡IDçš„æäº¤è®°å½•ï¼Œå°±ä¼šå°†è¯¥äº‹åŠ¡çš„æ•°æ®æ›´æ–°åˆ°å†…å­˜ç´¢å¼•ä¸­ï¼Œå¦‚æœè¯»åˆ°äº†å›æ»šçš„è®°å½•å°±ä¼šç›´æ¥æŠ›å¼ƒã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡åºåˆ—ï¼Œæ—¢æ²¡æœ‰æäº¤ä¹Ÿæ²¡æœ‰å›æ»šï¼Œè¿™ç§æƒ…å†µå¯èƒ½å‘ç”Ÿåœ¨çªç„¶å´©æºƒçš„æ—¶å€™ï¼Œå¯¹åº”è¿™ç§æ•°æ®åˆ™ç›´æ¥å¿½ç•¥ã€‚</p><p>è¿™æ ·ä¸€æ¥ï¼Œäº‹åŠ¡çš„ACIDéƒ½å¯ä»¥æ»¡è¶³äº†</p><ul><li>åŸå­æ€§å’Œä¸€è‡´æ€§ï¼Œåªæœ‰æäº¤æˆåŠŸçš„æ•°æ®æ‰ä¼šå‡ºç°åœ¨ç´¢å¼•ä¸­ï¼Œå›æ»šå’Œå´©æºƒçš„æƒ…å†µéƒ½ä¼šç›´æ¥æŠ›å¼ƒï¼Œæ‰€ä»¥åªæœ‰æˆåŠŸå’Œå¤±è´¥ä¸¤ç§ç»“æœï¼Œå³ä¾¿å‡ºç°çªç„¶æ–­ç”µå´©æºƒï¼Œä¹Ÿä¸ä¼šå‡ºç°ç¬¬ä¸‰ç§çŠ¶æ€ã€‚</li><li>æŒä¹…æ€§ï¼šä¸€æ—¦äº‹åŠ¡æäº¤æˆåŠŸï¼Œä¹Ÿå°±æ˜¯æ ‡è®°äº‹åŠ¡æäº¤çš„ç‰¹æ®Šè®°å½•å†™å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œé‚£ä¹ˆè¿™äº›æ•°æ®åœ¨æ•°æ®åº“ä¸­å°±æ°¸è¿œç”Ÿæ•ˆäº†ï¼Œä¸ç®¡åé¢çªç„¶æ–­ç”µè¿˜æ˜¯å´©æºƒï¼Œåœ¨æ•°æ®åº“å¯åŠ¨æ—¶è¿™äº›äº‹åŠ¡æ•°æ®ä¸€å®šä¼šæˆåŠŸåŠ è½½åˆ°ç´¢å¼•ä¸­ã€‚</li><li>éš”ç¦»æ€§ï¼šäº‹åŠ¡ä¸äº‹åŠ¡ä¹‹é—´çš„ä¿®æ”¹æ˜¯å½¼æ­¤éƒ½ä¸å¯è§çš„ï¼Œåªæœ‰æäº¤åæ›´æ–°åˆ°ç´¢å¼•ä¸­ï¼Œæ‰€åšçš„ä¿®æ”¹æ‰èƒ½è¢«å…¶å®ƒäº‹åŠ¡çœ‹è§ã€‚</li></ul><p>åœ¨è¿é€æ—¶ï¼Œå¯ä»¥ç”¨æœ€å°å †æ¥ç»´æŠ¤å½“å‰çš„æ´»è·ƒäº‹åŠ¡ï¼Œåœ¨æ¯ä¸€æ¬¡æäº¤åå°±ä¼šæ¸…ç†å·²æäº¤äº‹åŠ¡åˆ—è¡¨ï¼Œå¦‚æœæäº¤æ—¶é—´å°äºå †é¡¶çš„äº‹åŠ¡å¼€å§‹æ—¶é—´ï¼Œè¯´æ˜è¯¥äº‹åŠ¡ä¸å¯èƒ½ä¼šä¸æ´»è·ƒçš„äº‹åŠ¡å‘ç”Ÿå†²çªï¼Œå°±å¯ä»¥å°†å…¶ä»å·²æäº¤äº‹åŠ¡åˆ—è¡¨ä¸­åˆ é™¤ï¼Œé¿å…è¯¥åˆ—è¡¨æ— é™è†¨èƒ€ã€‚</p><p>ä½†æ˜¯ï¼å‡¡æ˜¯éƒ½è¦æœ‰ä¸ªä½†æ˜¯ï¼Œä¸Šé¢è¿™ç§æ–¹æ³•çš„éš”ç¦»çº§åˆ«åªèƒ½å¤Ÿä¿è¯è¯»æäº¤ï¼Œæ— æ³•ä¿è¯å¯é‡å¤è¯»ï¼Œå¦‚æœè¯»è¿‡çš„æ•°æ®åœ¨äº‹åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­è¢«ä¿®æ”¹äº†ï¼Œå°±ä¼šå‘ç”Ÿå†²çªï¼Œè¿™ç§æƒ…å†µè¦ä¹ˆå›æ»šè¦ä¹ˆé‡è¯•ã€‚å½“ç„¶ï¼Œriverdbä¹Ÿæä¾›äº†å¦ä¸€ä¸ªéš”ç¦»çº§åˆ«ï¼Œä¸²è¡ŒåŒ–ï¼Œå°±è·ŸRoseDBå’ŒNutsDBä¸€æ ·ï¼Œä½¿ç”¨è¯»å†™é”æ¥ä¿è¯äº‹åŠ¡ä¹‹é—´æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å‡ ä¹å¾ˆéš¾å‘ç”Ÿå†²çªï¼Œåå¤„æŸä¸€æ—¶åˆ»å°±æ˜¯åªæœ‰ä¸€ä¸ªåç¨‹èƒ½å†™å…¥æ•°æ®ã€‚</p><p>é«˜æ€§èƒ½å¾€å¾€æ„å‘³ç€çš„å¯é æ€§ä½ï¼Œé«˜å¯é æ€§ä¹Ÿä»£è¡¨ç€æ€§èƒ½ä¼šæ‹–åè…¿ï¼Œäº‹åŠ¡å°±æ˜¯å¯é æ€§å’Œæ€§èƒ½ä¹‹é—´çš„æƒè¡¡ï¼Œè‡³äºé€‰æ‹©ä»€ä¹ˆéš”ç¦»çº§åˆ«ï¼Œè¿™ä¸ªå¯ä»¥åšæˆå¯é…ç½®åŒ–çš„ï¼Œè®©ä½¿ç”¨è€…è‡ªå·±é€‰æ‹©ã€‚</p><h2 id="åˆå¹¶" tabindex="-1"><a class="header-anchor" href="#åˆå¹¶" aria-hidden="true">#</a> åˆå¹¶</h2><p>åœ¨å­˜å‚¨é‚£ä¸€å—æåˆ°äº†å¢é‡å†™å¯¼è‡´çš„é—®é¢˜ï¼Œç”±äºä¸ç®¡æ˜¯å¢åˆ æ”¹ï¼Œéƒ½ä¼šæ’å…¥ä¸€æ¡æ–°çš„æ•°æ®ï¼Œéšç€æ—¶é—´çš„æµé€å†—ä½™çš„æ•°æ®è¶Šæ¥è¶Šå¤šï¼Œè‚¯å®šéœ€è¦å»æ¸…ç†çš„ï¼Œä¸ç„¶ä¼šå ç”¨å¤§é‡çš„ç©ºé—´ã€‚å¯¹æ•°æ®åº“ä¸­æ— ç”¨çš„æ•°æ®è¿›è¡Œæ¸…ç†ï¼Œè¿™ä¸€è¿‡ç¨‹ç§°ä¸ºåˆå¹¶ã€‚åœ¨åˆå¹¶æ¸…ç†æ•°æ®çš„æ—¶å€™ï¼Œæœ‰å‡ ä¸ªé—®é¢˜éœ€è¦æ€è€ƒ</p><ul><li>æ¸…ç†å“ªäº›æ•°æ®</li><li>åœ¨ä»€ä¹ˆæ—¶å€™æ¸…ç†</li><li>å¦‚ä½•æ¸…ç†</li></ul><p>æ¸…ç†å“ªäº›æ•°æ®ï¼Ÿæ¢³ç†äº†ä¸€ä¸‹åº”è¯¥æœ‰ä¸‹é¢è¿™äº›æ•°æ®</p><ul><li>è¿‡æœŸçš„æ•°æ®ï¼Œå·²ç»è¿‡æœŸçš„æ•°æ®æ˜¯æ²¡æœ‰å¿…è¦å†å­˜åœ¨çš„</li><li>è¢«è¦†ç›–çš„æ•°æ®ï¼Œæœ‰æ•ˆçš„æ•°æ®å§‹ç»ˆåªæœ‰ä¸€æ¡ï¼Œè¢«è¦†ç›–åæ²¡æœ‰å­˜åœ¨çš„å¿…è¦</li><li>è¢«åˆ é™¤çš„æ•°æ®ï¼Œåˆ é™¤åä¹Ÿä¸éœ€è¦äº†</li><li>å›æ»šçš„äº‹åŠ¡æ•°æ®</li><li>æ— æ•ˆçš„äº‹åŠ¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯å†™å…¥æ•°æ®ï¼Œä½†æ˜¯å³æ²¡æäº¤ä¹Ÿæ²¡å›æ»š</li></ul><p>å¯¹äºäº‹åŠ¡æ•°æ®ï¼ŒæˆåŠŸæäº¤åçš„äº‹åŠ¡æ•°æ®åœ¨æ¸…ç†æ—¶å¯ä»¥å°†å…¶äº‹åŠ¡IDæ¸…ç©ºï¼Œåœ¨æ•°æ®åº“å¯åŠ¨æ—¶è¯»å–æ•°æ®æ—¶ï¼Œè¯»åˆ°åˆå¹¶åçš„æ•°æ®å¯ä»¥ç›´æ¥æ›´æ–°åˆ°ç´¢å¼•ä¸­ï¼Œè€Œä¸éœ€è¦æ”¶é›†æ•´ä¸ªäº‹åŠ¡åºåˆ—æ¥åˆ¤æ–­æ˜¯å¦æäº¤æˆåŠŸã€‚</p><p>åœ¨ä»€ä¹ˆæ—¶å€™æ¸…ç†ï¼Ÿè‚¯å®šæ˜¯ä¸èƒ½ç›´æ¥åœ¨åŸæ•°æ®æ–‡ä»¶ä¸ŠåŠ¨æ‰‹ï¼Œå¦åˆ™çš„è¯ä¼šé˜»å¡å…¶å®ƒæ­£åœ¨è¿›è¡Œçš„è¯»å†™æ“ä½œï¼Œä¸€ä¸ªBitcaskå®ä¾‹æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ•°æ®åº“æœ¬èº«å°±æ˜¯ä¸€ä¸ªBitcaskç¤ºä¾‹ï¼Œä¸ºäº†ä¸é˜»å¡è¯»å†™ï¼Œå¯ä»¥åœ¨æ¸…ç†åˆå¹¶æ•°æ®çš„å†æ–°å»ºä¸€ä¸ªBitcaskå®ä¾‹ï¼Œå°†æ¸…ç†åçš„æ•°æ®å†™å…¥åˆ°æ–°çš„å®ä¾‹ä¸­ï¼Œç„¶åå†å°†æ•°æ®è¦†ç›–åˆ°æ•°æ®åº“å®ä¾‹ä¸­ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯åªæœ‰åœ¨è¿›è¡Œè¦†ç›–æ“ä½œçš„æ—¶å€™æ‰ä¼šé˜»å¡è¯»å†™æ“ä½œï¼Œå…¶å®ƒæ—¶å€™ä¸å½±å“ã€‚</p><p>å¦‚ä½•æ¸…ç†ï¼Ÿåœ¨æ¸…ç†å¼€å§‹ä¹‹å‰å¯ä»¥è®©bitcaskå®ä¾‹æ–°å»ºä¸€ä¸ªactive-fileï¼Œå°†å½“å‰æ–‡ä»¶å½’å…¥immutable-fileï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨æ¸…ç†è¿‡ç¨‹ä¸­æ–°çš„å†™å…¥å°±ä¼šå†™å…¥åˆ°æ–°çš„active-fileä¸­ï¼Œè€Œæ¸…ç†æ“ä½œåˆ™æ˜¯é’ˆå¯¹æ—§çš„immutable-fileï¼Œè®°å½•ä¸‹æ—§çš„active-fileçš„æ–‡ä»¶idï¼Œç„¶åé€ä¸ªéå†immutable-fileï¼Œå¦‚æœæ•°æ®è¢«åˆ é™¤äº†ï¼Œç´¢å¼•ä¸­è‡ªç„¶ä¸ä¼šå­˜åœ¨ï¼Œæ•°æ®æ˜¯å¦è¿‡æœŸéœ€è¦åœ¨éå†æ—¶åˆ¤æ–­ä¸€ä¸‹ï¼Œå¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯è¿˜è¦æ£€æŸ¥ä¸€ä¸‹ç´¢å¼•ä¿¡æ¯ä¸­çš„æ–‡ä»¶idæ˜¯å¦å¤§äºè®°å½•çš„æ–‡ä»¶idï¼Œæ˜¯çš„è¯è¯´æ˜æ˜¯æ–°çš„å†™å…¥æ“ä½œåˆ™å¿½ç•¥æ‰è¿™ä¸ªç´¢å¼•é¡¹ã€‚åœ¨éå†ç´¢å¼•æ—¶ï¼Œè¿˜å¯ä»¥åšä¸€ä»¶é¢å¤–çš„äº‹ï¼Œé‚£å°±æ˜¯æ„å»ºhintæ–‡ä»¶ï¼Œå°†æ–°çš„ç´¢å¼•ä¿¡æ¯å†™å…¥hintæ–‡ä»¶ä¸­ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåœ¨æ•°æ®åº“å¯åŠ¨æœŸé—´æ„å»ºç´¢å¼•æ—¶ï¼Œå¯¹äºæ¸…ç†åçš„è¿™éƒ¨åˆ†æ•°æ®å¯ä»¥ä¸ç”¨å»éå†æ¯ä¸€æ¡æ•°æ®ï¼Œè€Œä¸”å¯ä»¥ä»hintæ–‡ä»¶ä¸­è¯»å–ï¼Œå¯¹äºæœªæ¸…ç†çš„æ•°æ®ä»ç„¶éœ€è¦å»éå†å…¶çœŸå®æ•°æ®ï¼Œè¿™æ ·åšå¯ä»¥åŠ å¿«å†…å­˜çš„æ„å»ºé€Ÿåº¦ã€‚å¯¹äºhintæ–‡ä»¶ï¼Œå®ƒå°±ç­‰äºå­˜æ”¾åœ¨ç£ç›˜ä¸­çš„ç´¢å¼•ï¼Œå…¶ä¸­çš„æ¯ä¸€æ¡è®°å½•éƒ½åªå­˜æ”¾ç´¢å¼•ä¿¡æ¯ï¼Œä¸åŒ…å«å®é™…æ•°æ®ï¼Œå®ƒåªç”¨äºæ„å»ºç´¢å¼•ï¼Œè€Œä¸ä¼šç”¨äºæ•°æ®æŸ¥è¯¢ï¼Œç›®çš„åªæ˜¯ä¸ºäº†åŠ å¿«ç´¢å¼•çš„æ„å»ºé€Ÿåº¦ã€‚</p><p>å½“æ•°æ®æ¸…ç†å®Œæ¯•åï¼Œæ ¹æ®å…ˆå‰è®°å½•çš„æ–‡ä»¶IDè¦†ç›–æ‰åŸå…ˆçš„immutable-filesï¼Œç„¶ååœ¨é‡æ–°åŠ è½½ç´¢å¼•ï¼Œè¿™æ ·ä¸€æ¥åˆå¹¶è¿‡ç¨‹å°±å®Œæˆäº†ã€‚è¿˜å‰©ä¸‹æœ€åä¸€ä¸ªé—®é¢˜ï¼Œåˆå¹¶æ“ä½œè¯¥åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œï¼Ÿæœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼Œç¬¬ä¸€ä¸ªæ˜¯å®šæ—¶åˆå¹¶ï¼Œå¦ä¸€ä¸ªæ˜¯è§¦å‘ç‚¹ã€‚å®šæ—¶åˆå¹¶å°±æ¯”è¾ƒç®€å•äº†ï¼Œå°±åªæ˜¯å®šæ—¶æ“ä½œã€‚è§¦å‘ç‚¹åˆ™æ˜¯è®©æ•°æ®åº“åœ¨å†™å…¥æ—¶è®°å½•æ•°æ®æ¡æ•°ï¼Œå½“ç°æœ‰çš„æ•°æ®æ¡æ•°ä¸ç´¢å¼•ä¸­çš„æ¡æ•°è¾¾åˆ°ä¸€å®šæ¯”ä¾‹æ—¶å°±ä¼šè§¦å‘åˆå¹¶ã€‚è§¦å‘ç‚¹åˆå¹¶å°±éœ€è¦è€ƒç©¶äº†ï¼Œå¦‚æœæ•°æ®åº“ä¸­çš„æ•°æ®é‡æœ¬èº«å°±å¾ˆå°ï¼Œæ¯”å¦‚åªæœ‰100æ¡ï¼Œä½†è¿™100æ¡éƒ½æ˜¯é’ˆå¯¹ä¸€ä¸ªkeyçš„æ”¹å†™ï¼Œé‚£ä¹ˆæ¯”ä¾‹å°±è¾¾åˆ°äº†100ï¼š1ï¼Œå¯èƒ½ä¼šè§¦å‘åˆå¹¶ï¼Œä½†å®é™…ä¸Šæ ¹æœ¬å°±æ²¡æœ‰å¿…è¦ã€‚é‚£ä¹ˆè¯¥å¦‚ä½•å»åˆ¤æ–­æ˜¯å¦è¾¾åˆ°äº†è§¦å‘ç‚¹å‘¢ï¼Œè¿™ä¸ªå¯ä»¥ç”¨äº‹ä»¶ç›‘å¬æ¥å®ç°ï¼Œç›‘å¬æ•°æ®åº“çš„å†™å…¥è¡Œä¸ºï¼Œå¦‚æœè¾¾åˆ°äº†é˜ˆå€¼ï¼Œå°±å¯ä»¥è¿›è¡Œåˆå¹¶ï¼Œè€Œä¸”è¿™ä¸€è¿‡ç¨‹æ˜¯å¼‚æ­¥çš„ã€‚</p><p>è€ƒè™‘ä¸€ä¸ªæƒ…å†µï¼Œä¸€ä¸ªäº‹åŠ¡å·²ç»å‘æ•°æ®åº“ä¸­å†™å…¥äº†ä¸€äº›æ•°æ®ï¼Œä½†æ˜¯æ²¡æœ‰æäº¤ï¼Œè€Œæ°å¥½è¿™æ—¶å€™åˆè§¦å‘åˆå¹¶äº†ï¼Œåˆå¹¶æ—¶ä¼šæ–°å»ºä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œäºæ˜¯è¯¥äº‹åŠ¡çš„ååŠæ®µæ•°æ®å°±å†™å…¥äº†æ–°æ–‡ä»¶ä¸­ï¼Œå¹¶æˆåŠŸæäº¤ã€‚åˆå¹¶æ—¶ï¼Œä¹‹å‰çš„æ–‡ä»¶ä¼šè¢«å½’æ¡£ç„¶åæ¸…ç†æ‰å…¶ä¸­çš„æ— ç”¨æ•°æ®ã€‚ä½†æ˜¯ï¼Œè¿™ä¸ªäº‹åŠ¡çš„å‰åŠæ®µæ•°æ®åœ¨åˆå¹¶æ—¶æ˜¯æ‰«æä¸åˆ°æäº¤è®°å½•çš„ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šè¢«æ¸…ç†æ‰ï¼Œè¿™æ ·ä¸€æ¥åªæœ‰äº‹åŠ¡çš„ååŠæ®µæ•°æ®æŒä¹…åŒ–äº†ã€‚è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ä¸€ä¸ª<strong>äº‹åŠ¡è¢«æˆªæ–­</strong>äº†ã€‚å¦‚ä½•é¿å…è¿™ç§æƒ…å†µï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯ç”¨ä¸€ä¸ªäº’æ–¥é”è®©äº‹åŠ¡ä¸åˆå¹¶äº’æ–¥ï¼Œè¿™æ ·åšçš„ä»£ä»·å¾ˆæ˜æ˜¾ï¼Œä¼šå¯¼è‡´åˆå¹¶æ“ä½œé˜»å¡å…¶å®ƒäº‹åŠ¡çš„è¯»å†™è¡Œä¸ºï¼Œå¦‚æœæ•°æ®é‡å¤šäº†çš„è¯åˆå¹¶æ“ä½œæ˜¯éå¸¸è€—æ—¶çš„ã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆå¹¶æ“ä½œä¹‹å‰å¿…é¡»è¦ç­‰å¾…å½“å‰æ‰€æœ‰çš„æ´»è·ƒäº‹åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒåŒæ—¶é˜»å¡æ–°äº‹åŠ¡çš„å¼€å¯ï¼Œç„¶åå†å»åˆ›å»ºæ–°çš„æ•°æ®æ–‡ä»¶ï¼Œæ–‡ä»¶åˆ›å»ºå®Œæˆåè®©é˜»å¡çš„äº‹åŠ¡æ¢å¤è¿è¡Œã€‚è¿™æ ·åšè™½ç„¶åŒæ ·ä¼šé˜»å¡äº‹åŠ¡ï¼Œä½†å®ƒç­‰å¾…çš„æ—¶é—´æ˜¯æ´»è·ƒäº‹åŠ¡çš„æ‰§è¡Œæ—¶é—´+åˆ›å»ºæ–°æ•°æ®æ–‡ä»¶çš„æ—¶é—´ï¼ŒçœŸæ­£çš„åˆå¹¶æ“ä½œä¾æ—§æ˜¯å¼‚æ­¥çš„ï¼Œè€Œä½¿ç”¨äº’æ–¥é”çš„ç­‰å¾…æ—¶é—´æ˜¯ä¸€æ•´ä¸ªåˆå¹¶æ“ä½œçš„æ—¶é—´ã€‚</p><p>å…¶å®è¿˜æœ‰ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå¦‚ä¸‹å›¾</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312051932268.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å®ƒé‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯æŠŠè¯»å’Œå†™çš„æ–‡ä»¶åˆ†å¼€äº†ï¼Œå…¶å®è¿™å°±æ˜¯æˆ‘æ—©æœŸçš„è®¾æƒ³ã€‚äº‹åŠ¡çš„ä¿®æ”¹é¦–å…ˆè¢«å†™å…¥åˆ°wlogä¸­ï¼Œè¿™æ—¶å†…å­˜ç´¢å¼•å­˜å‚¨çš„æ˜¯wlogä¸­çš„ä½ç½®ç´¢å¼•ï¼Œç„¶ååˆ°äº†ä¸€å®šè§¦å‘ç‚¹å°†æ—¥å¿—ä¸­çš„æ•°æ®compactåˆ°dataä¸­ï¼Œå†æ›´æ–°å†…å­˜ç´¢å¼•ä¸ºdataä¸­çš„ä½ç½®ç´¢å¼•ï¼Œdataæ˜¯åªè¯»çš„ï¼Œé™¤äº†mergeæ“ä½œå¤–ä¸åšä»»ä½•ä¿®æ”¹ã€‚è¿™æ ·åšå…¶å®ä¾æ—§ä¼šå‘ç”Ÿä¸Šè¿°æäº¤çš„äº‹åŠ¡æˆªæ–­çš„æƒ…å†µï¼Œä½†compacté˜»å¡çš„æˆæœ¬è¦æ¯”mergeä½å¾ˆå¤šï¼Œæ˜¯å¯ä»¥æ¥å—çš„ã€‚å› ä¸ºæ¯ä¸€æ¬¡compactè¿‡åwlogçš„æ•°æ®éƒ½ä¼šè¢«æ¸…ç©ºï¼Œcompactä¸ä¼šéå†æ‰€æœ‰æ•°æ®ï¼Œè€Œmergeæ€»æ˜¯ä¼šéå†æ•´ä¸ªdata filesï¼Œcompactå’Œmergeæ“ä½œä¹Ÿå¹¶ä¸äº’æ–¥ï¼Œå¯ä»¥åŒæ—¶è¿›è¡Œã€‚è¿™ä¸ªæ–¹æ¡ˆæœ€ç»ˆæ²¡æœ‰è¢«é‡‡çº³ï¼Œä¸€æ˜¯å› ä¸ºå½“æˆ‘å‘ç°è¿™ä¸ªbugçš„æ—¶å€™å·²ç»å†™çš„å·®ä¸å¤šäº†ï¼Œè¦æ”¹åŠ¨çš„è¯ä¼šåŠ¨éå¸¸å¤šçš„ä¸œè¥¿ï¼ŒäºŒæ˜¯å®ƒè¿˜æ˜¯ä¼šå‡ºç°äº‹åŠ¡æˆªæ–­çš„æƒ…å†µï¼Œå¹¶ä¸”åœ¨compactçš„æ—¶å€™ä¾æ—§éœ€è¦é˜»å¡äº‹åŠ¡ï¼Œè¿˜ä¼šè®©æ•´ä¸ªè¿‡ç¨‹å˜å¾—æ›´å¤æ‚ã€‚</p><p>ä¸‹å›¾æ˜¯å®é™…ä¸Šåº”ç”¨çš„æ–¹æ¡ˆ</p><figure><img src="https://public-1308755698.cos.ap-chongqing.myqcloud.com//img/202312051952097.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å¯ä»¥çœ‹å¾—å‡ºæ¥å…¶å®æ˜¯æŠŠäº‹åŠ¡æ—¥å¿—å’Œæ•°æ®æ–‡ä»¶åˆæˆä¸€ä¸ªäº†ï¼Œå› ä¸ºbitcaskæ•°æ®æ–‡ä»¶çš„æ€§è´¨æœ¬èº«å°±è·Ÿäº‹åŠ¡æ—¥å¿—ä¸€æ¨¡ä¸€æ ·ã€‚</p><h2 id="å¤‡ä»½" tabindex="-1"><a class="header-anchor" href="#å¤‡ä»½" aria-hidden="true">#</a> å¤‡ä»½</h2><p>å¤‡ä»½çš„å®ç°æ€è·¯å°±éå¸¸ç®€å•äº†ï¼ŒBitcaskå®ä¾‹å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç›´æ¥æŠŠå½“å‰æ–‡ä»¶å¤¹æ‰“åŒ…æˆä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå°±å®Œæˆäº†å¤‡ä»½ï¼Œæ—¥åå¦‚æœè¦æ¢å¤åˆ°å¤‡ä»½çŠ¶æ€çš„è¯ï¼Œå°±ç›´æ¥è§£å‹ç¼©åˆ°æ•°æ®ç›®å½•å°±å¥½äº†ã€‚è§£å‹ç¼©æ˜¯ç”¨tar gzipæ¥å®ç°ï¼Œå®ƒçš„å…¼å®¹æ€§ä¼šæ›´å¥½äº›ã€‚</p><h2 id="ç›‘å¬" tabindex="-1"><a class="header-anchor" href="#ç›‘å¬" aria-hidden="true">#</a> ç›‘å¬</h2><p>æ•°æ®åº“æ€»å…±æœ‰å‡ ç§äº‹ä»¶</p><ul><li>æ›´æ–°äº‹ä»¶</li><li>åˆ é™¤äº‹ä»¶</li><li>å›æ»šäº‹ä»¶</li><li>å¤‡ä»½äº‹ä»¶</li><li>è¿˜åŸäº‹ä»¶</li><li>åˆå¹¶äº‹ä»¶</li></ul><p>å¯ä»¥ç”¨ä¸€ä¸ªé˜Ÿåˆ—æ¥å­˜æ”¾è¿™äº›äº‹ä»¶ï¼Œä¸Šè¿°æ“ä½œæˆåŠŸåï¼Œä¼šå‘é˜Ÿåˆ—ä¸­å‘é€æ¶ˆæ¯ï¼Œé˜Ÿåˆ—ä¼šå°†è¿™äº›æ¶ˆæ¯è½¬å‘ç»™ç”¨æˆ·å·²åˆ›å»ºçš„ç›‘å¬å™¨ï¼Œç›‘å¬å™¨çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¸¦ç¼“å†²çš„é€šé“ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä¸€ä¸ªæç®€çš„æ¶ˆæ¯é˜Ÿåˆ—çš„å®ç°ã€‚ç”¨æˆ·åœ¨åˆ›å»ºç›‘å¬å™¨æ—¶å¯ä»¥æŒ‡å®šç›‘å¬å“ªäº›æ¶ˆæ¯ï¼Œå¦‚æœä¸æ˜¯æƒ³è¦çš„æ¶ˆæ¯å°±ä¸ä¼šå‘é€ç»™è¯¥ç›‘å¬å™¨ï¼Œå¹¶ä¸”ç”¨æˆ·åˆ›å»ºçš„ç›‘å¬å™¨è¢«ç»´æŠ¤åœ¨æ•°æ®åº“ä¸­çš„ç›‘å¬å™¨åˆ—è¡¨ä¸­ï¼Œå½“æ¶ˆæ¯é˜Ÿåˆ—æœ‰æ–°çš„æ¶ˆæ¯æ—¶ï¼Œä¼šéå†æ•´ä¸ªåˆ—è¡¨é€ä¸ªå‘é€æ¶ˆæ¯ï¼Œå¯¹äºç”¨æˆ·è€Œè¨€ï¼Œåªå¯¹å…¶æš´éœ²ä¸€ä¸ªåªè¯»çš„é€šé“ç”¨äºæ¥æ”¶äº‹ä»¶ã€‚å…¶å®è¿™å°±æ˜¯ä¸€ä¸ªæç®€ç‰ˆçš„æ¶ˆæ¯é˜Ÿåˆ—å®ç°ã€‚</p><h2 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h2><p>è¿™ä¸ªç®€å•çš„æ•°æ®åº“èŠ±äº†æˆ‘å¤§æ¦‚ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œä»11æœˆ10æ—¥åˆ°12æœˆ2æ—¥ç»“æŸï¼Œåœ¨è¿‡ç¨‹ä¸­Walçš„å®ç°ä»¥åŠäº‹åŠ¡çš„æ”¯æŒå¡äº†æˆ‘æœ€ä¹…ï¼Œæœ€åç»ˆäºå®ç°äº†é¢„æœŸçš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†è·ç¦»ä½¿ç”¨ä»ç„¶éœ€è¦ä¸æ–­çš„æµ‹è¯•å’Œå®Œå–„ã€‚</p><p>ä»“åº“åœ°å€ï¼š<a href="https://github.com/246859/river" target="_blank" rel="noopener noreferrer">246859/river: light-weight kv database base on bitcask and wal (github.com)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å­¦ä¹ åˆ°äº†éå¸¸å¤šçš„ä¸œè¥¿ï¼Œæœ€é‡è¦çš„å°±æ˜¯å­˜å‚¨æ¨¡å‹Bitcaskçš„å®ç°ï¼ŒWalçš„å®ç°ï¼Œäº‹åŠ¡çš„å®ç°ï¼Œè¿™ä¸‰ä¸ªå°±æ˜¯riverdbçš„æ ¸å¿ƒç‚¹ï¼Œæ€»ç»“ä¸‹æ¥å°±æ˜¯</p><ul><li>ç£ç›˜å­˜å‚¨ï¼Œç£ç›˜å­˜å‚¨çš„å…³é”®ç‚¹åœ¨äºæ•°æ®çš„ç»„ç»‡å½¢å¼ï¼Œä»¥åŠFsyncè°ƒç”¨æ—¶æœºï¼Œæ˜¯æ€§èƒ½ä¸æŒä¹…æ€§ä¹‹é—´çš„æƒè¡¡</li><li>å†…å­˜ç´¢å¼•ï¼Œè€Œç´¢å¼•çš„å…³é”®ç‚¹åœ¨äºæ€ä¹ˆå»é€‰æ‹©ä¼˜åŒ–æ›´å¥½çš„æ•°æ®ç»“æ„ï¼Œæä¾›æ›´å¥½çš„æ€§èƒ½ï¼Œå ç”¨æ›´å°‘çš„å†…å­˜ã€‚</li><li>äº‹åŠ¡ç®¡ç†ï¼Œäº‹åŠ¡çš„å…³é”®ç‚¹åœ¨äºéš”ç¦»æ€§ï¼Œæ˜¯äº‹åŠ¡å¯é æ€§ä¸äº‹åŠ¡å¹¶å‘é‡ä¹‹é—´çš„æƒè¡¡</li></ul><p>è‡³äºå…¶å®ƒçš„åŠŸèƒ½ä¹Ÿå°±æ˜¯åœ¨å®ƒä»¬çš„åŸºç¡€ä¹‹ä¸Šè¡ç”Ÿå‡ºæ¥ï¼Œåªè¦è¿™ä¸‰ä¸ªæ ¸å¿ƒå¤„ç†å¥½äº†ï¼Œå…¶å®ƒçš„é—®é¢˜ä¹Ÿå°±ä¸ç®—ç‰¹åˆ«éš¾å¤„ç†ã€‚ç›®å‰å®ƒè¿˜åªæ˜¯ä¸€ä¸ªåµŒå…¥å¼çš„æ•°æ®åº“ï¼Œæ²¡æœ‰æä¾›ç½‘ç»œæœåŠ¡ï¼Œè¦æƒ³ä½¿ç”¨åªèƒ½é€šè¿‡å¯¼å…¥ä»£ç çš„æ–¹å¼ã€‚riverdbç°åœ¨ç­‰äºåªæ˜¯ä¸€ä¸ªæ•°æ®åº“å†…æ ¸ï¼Œåªè¦å†…æ ¸å®Œå–„äº†ï¼Œåœ¨å®ƒçš„åŸºç¡€ä¹‹ä¸Šå¼€å‘æ–°çš„å‘½ä»¤è¡Œå·¥å…·æˆ–è€…æ˜¯ç½‘ç»œæœåŠ¡åº”è¯¥è¿˜ç®—æ˜¯æ¯”è¾ƒç®€å•çš„ã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: 2633565580@qq.com">246859</span><!--]--><!--]--></div></div></footer><!----><div class="giscus-wrapper input-top" id="comment" style="display:block;"><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!----><!--]--></main><!--]--><!----></div><!--]--><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-85b15bba.js" defer></script>
  </body>
</html>
