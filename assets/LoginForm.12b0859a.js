var $=(I,u,d)=>new Promise((c,S)=>{var o=n=>{try{f(d.next(n))}catch(p){S(p)}},F=n=>{try{f(d.throw(n))}catch(p){S(p)}},f=n=>n.done?c(n.value):Promise.resolve(n.value).then(o,F);f((d=d.apply(I,u)).next())});import{A as K,a_ as j,an as B,r as R,P as O,j as U,u as e,B as g,D,F as z,G as M,w as s,a5 as t,a$ as V,ad as i,J as r,a1 as C,aS as m,ac as b,b0 as q,K as W,b1 as J,b2 as Q,b3 as H,b4 as X,b5 as Y,b6 as Z,aa as ee,b7 as se,b8 as te}from"./vendor.fc320178.js";/* empty css              *//* empty css               *//* empty css               *//* empty css               */import{u as ae,a as oe,L as k,_ as le,b as ne}from"./LoginFormTitle.789deed4.js";import{b as ie,a as re,f as ue,s as v,h as de}from"./index.ab59efba.js";const ke=K({setup(I){const u=se,d=te,c=j.Item,S=B.Password,{t:o}=ie(),{notification:F,createErrorModal:f}=de(),{prefixCls:n}=re("login"),p=ue(),{setLoginState:w,getLoginState:N}=ae(),{getFormRules:P}=oe(),L=R(),_=R(!1),h=R(!1),y=O({account:"vben",password:"123456"}),{validForm:A}=ne(L),E=U(()=>e(N)===k.LOGIN);function T(){return $(this,null,function*(){const x=yield A();if(!!x)try{_.value=!0;const a=yield p.login({password:x.password,username:x.account,mode:"none"});a&&F.success({message:o("sys.login.loginSuccessTitle"),description:`${o("sys.login.loginSuccessDesc")}: ${a.realName}`,duration:3})}catch(a){f({title:o("sys.api.errorTip"),content:a.message||o("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${n}`)||document.body})}finally{_.value=!1}})}return(x,a)=>(g(),D(ee,null,[z(s(le,{class:"enter-x"},null,512),[[M,e(E)]]),z(s(e(j),{class:"p-4 enter-x",model:e(y),rules:e(P),ref:(l,G)=>{G.formRef=l,L.value=l},onKeypress:Z(T,["enter"])},{default:t(()=>[s(e(c),{name:"account",class:"enter-x"},{default:t(()=>[s(e(B),{size:"large",value:e(y).account,"onUpdate:value":a[0]||(a[0]=l=>e(y).account=l),placeholder:e(o)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(c),{name:"password",class:"enter-x"},{default:t(()=>[s(e(S),{size:"large",visibilityToggle:"",value:e(y).password,"onUpdate:value":a[1]||(a[1]=l=>e(y).password=l),placeholder:e(o)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(d),{class:"enter-x"},{default:t(()=>[s(e(u),{span:12},{default:t(()=>[s(e(c),null,{default:t(()=>[s(e(V),{checked:h.value,"onUpdate:checked":a[2]||(a[2]=l=>h.value=l),size:"small"},{default:t(()=>[i(r(e(o)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),e(v).loginSetting.enableForgetPaswd?(g(),C(e(u),{key:0,span:12},{default:t(()=>[s(e(c),{style:{"text-align":"right"}},{default:t(()=>[s(e(m),{type:"link",size:"small",onClick:a[3]||(a[3]=l=>e(w)(e(k).RESET_PASSWORD))},{default:t(()=>[i(r(e(o)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})):b("",!0)]),_:1}),s(e(c),{class:"enter-x"},{default:t(()=>[s(e(m),{type:"primary",size:"large",block:"",onClick:T,loading:_.value},{default:t(()=>[i(r(e(o)("sys.login.loginButton")),1)]),_:1},8,["loading"]),e(v).loginSetting.enableRegister?(g(),C(e(m),{key:0,size:"large",class:"mt-4 enter-x",block:"",onClick:x.handleRegister},{default:t(()=>[i(r(e(o)("sys.login.registerButton")),1)]),_:1},8,["onClick"])):b("",!0)]),_:1}),e(v).loginSetting.otherLogin?(g(),C(e(d),{key:0,class:"enter-x"},{default:t(()=>[s(e(u),{md:8,xs:24},{default:t(()=>[s(e(m),{block:"",onClick:a[4]||(a[4]=l=>e(w)(e(k).MOBILE))},{default:t(()=>[i(r(e(o)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(u),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:t(()=>[s(e(m),{block:"",onClick:a[5]||(a[5]=l=>e(w)(e(k).QR_CODE))},{default:t(()=>[i(r(e(o)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(u),{md:7,xs:24},{default:t(()=>[s(e(m),{block:"",onClick:a[6]||(a[6]=l=>e(w)(e(k).REGISTER))},{default:t(()=>[i(r(e(o)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1})):b("",!0),e(v).loginSetting.otherLogin?(g(),C(e(q),{key:1,class:"enter-x"},{default:t(()=>[i(r(e(o)("sys.login.otherSignIn")),1)]),_:1})):b("",!0),e(v).loginSetting.otherLogin?(g(),D("div",{key:2,class:W(["flex justify-evenly enter-x",`${e(n)}-sign-in-way`])},[s(e(J)),s(e(Q)),s(e(H)),s(e(X)),s(e(Y))],2)):b("",!0)]),_:1},8,["model","rules","onKeypress"]),[[M,e(E)]])],64))}});export{ke as default};
